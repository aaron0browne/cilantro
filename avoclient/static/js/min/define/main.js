require.def("rest/basext",["lib/base"],function(){return Base.extend({__defargslist:function(o,v){o=o||this.constructor;v=v||[];if(o.ancestor)v=this.__defargslist(o.ancestor,v);o.defargs&&typeof o.defargs=="object"&&v.push(o.defargs);return v},_defargs:function(){var o=this.__defargslist();return $.extend.apply(this,[{}].concat(o))},constructor:function(o){var v=this._defargs();o=$.extend({},v,o);for(var D in o)if(v.hasOwnProperty(D))this[D]=o[D]}},{defargs:{}})});
require.def("rest/datasource",["rest/basext"],function(o){return{ajax:o.extend({}).extend({get:function(v){v=v||this.params;this.xhr=$.ajax({url:this.uri,data:v,success:this.success,error:this.error});return this}},{defargs:{uri:window.location,params:{},success:function(){},error:function(){}}})}});
require.def("rest/renderer",["rest/basext","lib/jquery.jqote2"],function(o){o=o.extend({},{defargs:{target:null}});var v=o.extend({render:function(D,n){n=n?n:this.replace;n===true&&this.target.html("");if(this.bindData===true){l=[];for(var h,k,p=0;p<D.length;p++){h=D[p];k=$.jqoteobj(this.template,h);k.data(h);l.push(k)}}else l=[$.jqoteobj(this.template,D)];var i=this.target;n==="prepend"?$.each(l.reverse(),function(){i.prepend(this)}):$.each(l,function(){i.append(this)});return this.target}},{defargs:{template:null,
replace:true,bindData:false}});return{base:o,template:v}});require.def("define/templates",function(){return{scope_element:'<div data-uri="<%=this.uri%>" data-id="<%= this.pk %>" class="criterion clearfix"><a href="#" class="remove-criterion"></a><a href="#" class="field-anchor"><%= this.description %></a></div>',run_query:'<button id="submit-query"><span class="iconic arrow-right"></span> Get Report</button>'}});
require.def("define/search",["rest/datasource","rest/renderer","define/templates"],function(){function o(){var v=$("#content"),D=$("#tabs"),n=$("#search"),h=$("#search-panel form"),k=$("#plugin-panel"),p=$("#criteria").children("div"),i=$("#no-results");v.bind("activate-tab",function(y){var G=$(y.target);y=G.attr("data-search");if(G.is("form"))y=n.val();G.addClass("active").siblings().removeClass("active");v.activetab=G;if(G=G.data("concept_id")){k.show();v.trigger("activate-criterion",[G])}else k.hide();
n.trigger("search-0",[y,true]);return false});D.delegate(".tab","click",function(){$(this).trigger("activate-tab");return false});n.bind("focus",function(){h.trigger("activate-tab")}).focus();v.bind("setid-tab",function(y,G){v.activetab&&v.activetab.data("concept_id",parseInt(G));return false});n.autocomplete2({success:function(y,G){p.hide();i.hide();if(G.length>0)for(y=0;y<G.length;y++)p.filter("[data-id="+G[y]+"]").show();else i.html('No conditions found for "'+y+'".').show();return false}},null,
50)}return{init:o}});
require.def("define/chart",["define/form","lib/highcharts"],function(o){var v=function(n){var h={};$.each(n,function(k,p){h[p[0]]=p[1]});return h},D=function(n){var h={};$.each(n,function(k,p){h[p[1]]=p[0]});return h};return{getBarChart:function(n,h){function k(){$.map(A.series[0].data,function(t){if($.inArray(i[t.category],g)!==-1)y?t.update({color:"#EE3A43"}):t.update({color:"#99BDF1"});else t.update({color:"#C5C5C5"});$(t.tracker.element).mouseover();$(t.tracker.element).mouseout()});A.xAxis[0].isDirty=
true;A.yAxis[0].isDirty=true;A.isDirty=true;A.series[0].isDirty=true;A.redraw()}var p=v(n.data.choices),i=D(n.data.choices),y=false,G=o.Form({fields:[{datatype:"string",name:n.data.name,choices:n.data.choices,pk:n.data.pk}]},h);G.find("select[multiple]").hide();G.find("input").css("margin","10px");var B=$('<div class="chart"></div>'),g=[],q=function(){B.trigger("ElementChangedEvent",[{name:h+"_"+n.data.pk,value:g}])},A=new Highcharts.Chart({chart:{marginLeft:100,marginBottom:n.data.coords.length>
6?100:50,renderTo:B.get(0),defaultSeriesType:"column",zoomType:"",events:{redraw:function(){for(var t=0;t<this.series[0].data.length;t++){var z=this.series[0].data[t];$(z.dataLabel.element).attr("fill",z.color);$(z.dataLabel.element).css("color",z.color);$(z.dataLabel.element).hover(function(){$(this).css("cursor","pointer")},function(){$(this).css("cursor","")});$(z.dataLabel.element).click(function(H){return function(){H.series.chart.hoverPoint=H;H.series.chart.isDirty=true;var aa=$.inArray(i[H.category],
g);if(aa===-1){y?H.update({color:"#EE3A43"}):H.update({color:"#99BDF1"});g.push(i[H.category])}else{H.update({color:"#C5C5C5"});g.splice(aa,1)}q()}}(z))}},load:function(){for(var t=0;t<this.series[0].data.length;t++){var z=this.series[0].data[t];$(z.dataLabel.element).hover(function(){$(this).css("cursor","pointer")},function(){$(this).css("cursor","")});$(z.dataLabel.element).click(function(H){return function(){H.series.chart.hoverPoint=H;H.series.chart.isDirty=true;var aa=$.inArray(i[H.category],
g);if(aa===-1){if(y){$(H.dataLabel.element).css("color","#EE3A43");H.update({color:"#EE3A43"})}else{$(H.dataLabel.element).css("color","#99BDF1");H.update({color:"#99BDF1"})}g.push(i[H.category])}else{$(H.dataLabel.element).css("color","#C5C5C5");H.update({color:"#C5C5C5"});g.splice(aa,1)}}}(z))}}}},plotOptions:{series:{events:{click:function(t){var z=t.point.category||t.point.name,H=$.inArray(i[z],g);if(H===-1){y?t.point.update({color:"#EE3A43"}):t.point.update({color:"#99BDF1"});g.push(i[z])}else{t.point.update({color:"#C5C5C5"});
g.splice(H,1)}A.hoverPoint=t.point;A.hoverSeries=this;q()}}},column:{dataLabels:{enabled:true},allowPointSelect:false,cursor:"pointer",enableMouseTracking:true,stickyTracking:false,states:{hover:{brightness:-0.1,enabled:true}}}},credits:{enabled:false},legend:{enabled:false},title:{text:n.data.title},tooltip:{formatter:function(){return this.point.category+", "+this.y}},xAxis:{categories:$.map(n.data.coords,function(t){return p[t[0]]}),title:{text:n.data.xaxis,margin:n.data.coords.length>6?90:50},
labels:{align:n.data.coords.length>6?"left":"center",y:n.data.coords.length>6?10:20,rotation:n.data.coords.length>6?50:0,formatter:function(){var t=this.value;if(n.data.coords.length>6){if(t.length>20)t=t.substr(0,18)+".."}else t=this.value.split(" ").join("<br/>");return t}}},yAxis:{min:0,title:{text:n.data.yaxis},labels:{rotation:45}},series:[{name:n.data.title,data:$.map(n.data.coords,function(t){return t[1]})}]});G.bind("ElementChangedEvent",function(t,z){if(z.value!==null){y=z.value==="in"?false:
true;k()}});B.bind("GainedFocusEvent",function(){k()});B.bind("UpdateDSEvent",function(t,z){g=z[h+"_"+n.data.pk];if(g===undefined)g=[];else g instanceof Array||(g=[g]);y=z[h+"_"+n.data.pk+"_operator"]==="-in";G.triggerHandler(t,[z])});B.bind("UpdateElementEvent",function(t,z){if(z.name===h+"_"+n.data.pk)g=z.value;else if(z.name===h+"_"+n.data.pk+"_operator")y=z.value==="in"?false:true;G.triggerHandler(t,[z])});return B},getLineChart:function(n,h){var k=o.Form({fields:[n.data]},h);k.find("input").css("margin",
"10px");var p=$('<div class="chart"></div>'),i=new Highcharts.Chart({chart:{marginBottom:50,renderTo:p.get(0),defaultSeriesType:"line",zoomType:"x",events:{selection:function(B){k.find("select[name*=operator]").val();var g=this.xAxis[0].getExtremes(),q=B.xAxis[0].min,A=B.xAxis[0].max;q=q<g.min?g.min:q;A=A>g.max?g.max:A;q=parseFloat(q).toFixed(1);A=parseFloat(A).toFixed(1);$("input[name*=input0]",k).val(q).change();$("input[name*=input1]",k).val(A).change();this.xAxis[0].isDirty=true;i.isDirty=true;
this.xAxis[0].redraw();i.redraw();B.preventDefault()},click:function(B){if(!i.options.chart.zoomType){var g=this.xAxis[0].getExtremes();B=B.xAxis[0].value;B=B<g.min?g.min:B;B=parseFloat(B).toFixed(1);$("input[name*=input0]",k).val(B).change();this.xAxis[0].isDirty=true;i.isDirty=true;this.xAxis[0].redraw();i.redraw()}}}},tooltip:{formatter:function(){return""+this.y}},credits:{enabled:false},legend:{enabled:false},title:{text:n.data.title},xAxis:{maxPadding:0.05,startOnTick:false,title:{text:n.data.xaxis},
labels:{align:"center",y:20}},yAxis:{min:0,title:{style:{fontWeight:"bold"},text:n.data.yaxis,rotation:270},labels:{rotation:45}},series:[{name:n.data.title,data:n.data.coords}],plotOptions:{line:{animation:true},series:{point:{events:{click:function(){if(!i.options.chart.zoomType){var B=i.xAxis[0].getExtremes(),g=this.x;g=g<B.min?B.min:g;g=parseFloat(g).toFixed(1);$("input[name*=input0]",k).val(g).change();i.xAxis[0].isDirty=true;i.isDirty=true;i.xAxis[0].redraw();i.redraw()}}}}}}}),y=i.xAxis[0].getExtremes(),
G=function(){var B=null,g=i.options,q=parseFloat($("input[name*=input0]",k).val()).toFixed(1),A=parseFloat($("input[name*=input1]",k).val()).toFixed(1);switch(k.find("select[name*=operator]").val()){case "range":B="#99BDF1";case "-range":B=B||"#EE3A43";if(g.chart.zoomType!=="x"){k.detach();i.destroy();g.chart.zoomType="x";g.plotOptions.line.animation=false;i=new Highcharts.Chart(g);p.append(k)}i.xAxis[0].removePlotBand();q&&A&&i.xAxis[0].addPlotBand({from:q,to:A,color:B});p.trigger("ShowDependentsEvent");
break;case "lt":B="#99BDF1";if(g.chart.zoomType!==""){k.detach();i.destroy();g.chart.zoomType="";g.plotOptions.line.animation=false;i=new Highcharts.Chart(g);p.append(k)}i.xAxis[0].removePlotBand();if(q){i.xAxis[0].addPlotLine({value:q,color:"#EE3A43",width:3});i.xAxis[0].addPlotBand({from:y.min,to:q,color:B})}p.trigger("ShowDependentsEvent");break;case "gt":B="#99BDF1";if(g.chart.zoomType!==""){k.detach();i.destroy();g.chart.zoomType="";g.plotOptions.line.animation=false;i=new Highcharts.Chart(g);
p.append(k)}i.xAxis[0].removePlotBand();if(q){i.xAxis[0].addPlotLine({value:q,color:"#EE3A43",width:3});i.xAxis[0].addPlotBand({from:q,to:y.max,color:B})}p.trigger("ShowDependentsEvent");break;case "lte":B="#99BDF1";if(g.chart.zoomType!==""){k.detach();i.destroy();g.chart.zoomType="";g.plotOptions.line.animation=false;i=new Highcharts.Chart(g);p.append(k)}i.xAxis[0].removePlotBand();q&&i.xAxis[0].addPlotBand({from:y.min,to:q,color:B});p.trigger("ShowDependentsEvent");break;case "gte":B="#99BDF1";
if(g.chart.zoomType!==""){k.detach();i.destroy();g.chart.zoomType="";g.plotOptions.line.animation=false;i=new Highcharts.Chart(g);p.append(k)}i.xAxis[0].removePlotBand();q&&i.xAxis[0].addPlotBand({from:q,to:y.max,color:B});p.trigger("ShowDependentsEvent");break;case "exact":if(g.chart.zoomType!==""){k.detach();i.destroy();g.chart.zoomType="";g.plotOptions.line.animation=false;i=new Highcharts.Chart(g);p.append(k)}i.xAxis[0].removePlotBand();q&&i.xAxis[0].addPlotLine({value:q,color:"#99BDF1",width:3});
p.trigger("ShowDependentsEvent");break;case "-exact":if(g.chart.zoomType!==""){k.detach();i.destroy();g.chart.zoomType="";g.plotOptions.line.animation=false;i=new Highcharts.Chart(g);p.append(k)}i.xAxis[0].removePlotBand();q&&i.xAxis[0].addPlotLine({value:q,color:"#EE3A43",width:3});p.trigger("ShowDependentsEvent");break;case "isnull":B="#EE3A43";if(g.chart.zoomType!==""){k.detach();i.destroy();g.chart.zoomType="";g.plotOptions.line.animation=false;i=new Highcharts.Chart(g);p.append(k)}i.xAxis[0].removePlotBand();
i.xAxis[0].addPlotLine({from:y.min,to:y.max,color:B});p.trigger("HideDependentsEvent");break;case "-isnull":if(g.chart.zoomType!==""){k.detach();i.destroy();g.chart.zoomType="";g.plotOptions.line.animation=false;i=new Highcharts.Chart(g);p.append(k)}p.trigger("ShowDependentsEvent");i.xAxis[0].removePlotBand();break}i.xAxis[0].isDirty=true;i.redraw()};k.bind("ElementChangedEvent",G);p.append(k);n=1/3*(y.max-y.min);$("input[name*=input0]",k).val((y.min+n).toFixed(1));$("input[name*=input1]",k).val((y.min+
2*n).toFixed(1));p.bind("UpdateDSEvent",function(B,g){k.triggerHandler(B,[g])});p.bind("UpdateElementEvent",function(B,g){k.triggerHandler(B,[g]);G(null)});p.bind("GainedFocusEvent",function(){$("input,select",p).change();i.xAxis[0].isDirty=true;i.yAxis[0].isDirty=true;i.isDirty=true;i.redraw()});return p},getPieChart:function(n,h){function k(){$.map(aa.series[0].data,function(O){if($.inArray(i[O.name||O.category],z)!==-1)y?O.update({color:"#EE3A43"}):O.update({color:"#99BDF1"});else O.update({color:"#C5C5C5"});
$(O.tracker.element).mouseover();$(O.tracker.element).mouseout()});aa.xAxis[0].isDirty=true;aa.yAxis[0].isDirty=true;aa.isDirty=true;aa.series[0].isDirty=true;aa.redraw()}var p=v(n.data.choices),i=D(n.data.choices),y=false,G=o.Form({fields:[{datatype:"string",name:n.data.name,choices:n.data.choices,pk:n.data.pk}]},h);G.find("select[multiple]").hide();$.each(n.data.coords,function(O){n.data.coords[O][0]=p[n.data.coords[O][0]]});var B=n.data.coords,g={};$.each(B,function(O,V){g[V[0]]=V[1]});var q=0;
$.each(B,function(O,V){q+=V[1]});var A=q*0.04;$.each(B,function(O,V){if(V[1]<A)V[1]=A});var t=$('<div class="chart"></div>'),z=[],H=function(){t.trigger("ElementChangedEvent",[{name:h+"_"+n.data.pk,value:z}])};t.bind("UpdateElementEvent",function(O,V){if(V.name===h+"_"+n.data.pk)z=V.value;else y=V.name===h+"_"+n.data.pk+"_operator"&&V.value==="in"?false:true;G.triggerHandler(O,[V])});var aa=new Highcharts.Chart({chart:{marginBottom:50,renderTo:t.get(0),defaultSeriesType:"pie",zoomType:""},tooltip:{formatter:function(){return""+
g[this.point.name]}},plotOptions:{series:{events:{click:function(O){var V=O.point.category||O.point.name,za=$.inArray(i[V],z);if(za===-1){y?O.point.update({color:"#EE3A43"}):O.point.update({color:"#99BDF1"});z.push(i[V])}else{O.point.update({color:"#C5C5C5"});z.splice(za,1)}H();aa.hoverPoint=O.point;aa.hoverSeries=this}}},pie:{dataLabels:{enabled:true,formatter:function(){return this.point.name}},borderColor:"#000000",borderWidth:2,allowPointSelect:false,cursor:"pointer",enableMouseTracking:true,
stickyTracking:false,states:{hover:{brightness:-0.1,enabled:true}},point:{events:{mouseOver:function(){},mouseOut:function(){}}}}},credits:{enabled:false},legend:{enabled:false},title:{text:n.data.title},series:[{type:"pie",name:n.data.title,data:n.data.coords}]});G.bind("ElementChangedEvent",function(O,V){if(V.value!==null){y=V.value==="in"?false:true;k()}});t.bind("GainedFocusEvent",function(){y=false;k()});t.bind("UpdateDSEvent",function(O,V){z=V[h+"_"+n.data.pk];if(z===undefined)z=[];else z instanceof
Array||(z=[z]);y=V[h+"_"+n.data.pk+"_operator"]==="-in";G.triggerHandler(O,[V])});return t}}});
require.def("define/views",["define/chart","define/form"],function(o,v){function D(n,h){var k=$('<div class="view"></div>');k.bind("UpdateQueryButtonClicked",function(){$(this).trigger("ConstructQueryEvent")});k.bind("UpdateElementEvent",function(p){k.children().each(function(){$(this).triggerHandler(p)});p.stopPropagation()});k.bind("HideDependentsEvent ShowDependentsEvent",function(p){p.target===k.children().get(0)&&k.children().slice(1).each(function(){$(this).triggerHandler(p)});p.stopPropagation()});
n.elements[0].type!=="chart"&&k.append("<h2>"+h+"</h2>");$.each(n.elements,function(p,i){switch(i.type){case "form":k.append(v.Form(i,n.concept_id));break;case "chart":p=i.data.datatype;if(p==="number")k.append(o.getLineChart(i,n.concept_id));else p==="nullboolean"||p==="boolean"?k.append(o.getPieChart(i,n.concept_id)):k.append(o.getBarChart(i,n.concept_id));break;default:k.append($("<p>Undefined View!</p>"))}});return k}return{createView:D}});
require.def("define/conceptmanager",["define/views"],function(o){return{manager:function(v,D,n,h,k){function p(m){if($.inArray(m.concept_id,Hb)<0){Hb.push(parseInt(m.concept_id));if(S===parseInt(m.concept_id)){Mb.html('<span class="iconic arrow-up"></span> Update Condition');$(".inquery",k).show()}}m.stopPropagation()}function i(m){var u=$.inArray(parseInt(m.concept_id),Hb);if(u>=0){Hb.splice(u,1);if(S===parseInt(m.concept_id)){Mb.html('<span class="iconic plus"></span> Add Condition');$(".inquery",
k).hide()}}m.stopPropagation()}function y(m){var u=null;$.each(Ga.elements,function(C,X){if(X.data){if(X.data.pk==m){u=X.data.datatype;return false}if(X.data.pkchoices&&$.inArray(m,$.map(X.data.pkchoices,function(ga){return ga[0]}))>=0){u=X.data.datatype;return false}}else{$.each(X.fields,function(ga,oa){if(oa.pk==m){u=oa.datatype;return false}if(oa.pkchoices&&$.inArray(m,$.map(oa.pkchoices,function(va){return va[0]}))>=0){u=oa.datatype;return false}});if(u!==null)return false}});return u}function G(m){var u=
{};for(var C in m)if(m.hasOwnProperty(C)){var X=Wb.exec(C);if(X)if(u.hasOwnProperty(X[2]))$.extend(u[X[2]],{val0:m[C],val1:undefined,op:undefined});else u[X[2]]={val0:m[C],val1:undefined,op:undefined};else if(X=yb.exec(C)){u.hasOwnProperty(X[2])||(u[X[2]]={val0:undefined,val1:undefined,op:undefined});u[X[2]]["val"+X[3]]=Number(m[C])}else if(X=Xb.exec(C))if(u.hasOwnProperty(X[0]))u[X[0]].pk=m[C];else u[X[0]]={val0:undefined,val1:undefined,op:undefined,pk:m[C]}}for(C in m)if(m.hasOwnProperty(C))if((X=
sc.exec(C))&&(u[X[2]]||m[C].match(/null/))){u.hasOwnProperty(X[2])||(u[X[2]]={val0:undefined,val1:undefined,op:undefined});u[X[2]].op=m[C]}m=[];for(var ga in u){C=u[ga];X=false;var oa=null;if(Xb.exec(ga)){oa=ga.split("OR");ga=C.pk;X=true}ga=Number(ga);if(C.val0===undefined&&C.val1===undefined&&C.op!==undefined)m.push({operator:C.op,id:ga,concept_id:S,value:true,datatype:y(ga)});else if(C.val0!==undefined&&C.val1!==undefined&&C.op!==undefined)m.push({operator:C.op,id:ga,value:[C.val0,C.val1],concept_id:S,
datatype:y(ga)});else if(C.val0!==undefined&&C.op!==undefined&&!(C.val0 instanceof Array))m.push({operator:C.op,id:ga,value:C.val0,concept_id:S,datatype:y(ga)});else if(C.val0!==undefined&&C.val0 instanceof Array){C.op=C.op!==undefined?C.op:"in";var va=y(ga);switch(va){case "boolean":case "nullboolean":var ra=[],cb=fc[C.op];$.each(C.val0,function(db,gc){ra.push({operator:cb,id:ga,value:Yb[gc]!==undefined?Yb[gc]:gc,concept_id:S,datatype:va})});ra.length>1?m.push({type:kb.test(C.op)?"and":"or",children:ra,
concept_id:S}):m.push(ra[0]);break;default:m.push({operator:C.op,id:ga,value:C.val0,concept_id:S});break}}else if(C.val0!==undefined&&!(C.val0 instanceof Array)&&C.val1===undefined)m.push({operator:"exact",id:ga,value:C.val0,concept_id:S});else throw"Unable to determine field "+C+" in concept "+S;if(X)m[m.length-1].id_choices=oa}return m.length===1?m[0]:{type:"and",children:m,concept_id:S}}function B(m,u){var C=u||{};if(m.hasOwnProperty("type"))$.each(m.children,function(oa,va){B(va,C)});else{if(m.hasOwnProperty("id_choices")){u=
m.id_choices.join("OR");C[u]=m.id}else u=m.id;u=m.concept_id+"_"+u;if(!m.operator.match(/null/))if(m.datatype=="number")for(var X=m.value instanceof Array?m.value:[m.value],ga=0;ga<X.length;ga++)C[u+"_input"+ga]=X[ga];else if(C.hasOwnProperty(u)){C[u]instanceof Array||(C[u]=[C[u]]);C[u].push(m.value)}else C[u]=m.value;C[u+"_operator"]=C[u]instanceof Array&&m.datatype&&m.datatype.indexOf("boolean")>=0?Ra[m.operator]:m.operator}return C}function g(m,u){Ga.contents=u;h.append(u);Ga.contents.css("display",
"block");$(".chart",Ga.contents).css("display","block");Ga.loaded||u.children().trigger("UpdateDSEvent",[ia[S].ds]);u.children().trigger("GainedFocusEvent");Ga.loaded=true}function q(m,u){if(Ga!==null){Ga.contents.css("display","none");Ga.contents.children().trigger("LostFocusEvent");Ga.contents.detach()}Ga=ia[S].views[u];if(Ga.loaded)g(null,Ga.contents);else{Ga.concept_id=S;Ga.type!=="custom"?v.trigger("ViewReadyEvent",[o.createView(Ga,ia[S].name)]):ea(Ga,null)}}function A(){}function t(m,u){m=ia[S].ds;
var C=false;if(!(!(u.value instanceof Array)&&m[u.name]===u.value)){if(u.value instanceof Array&&m[u.name]instanceof Array){for(var X=0;X<u.value.length;X++)if($.inArray(u.value[X],m[u.name])==-1){C=true;break}if(C===false&&u.value.length==m[u.name].length)return}if(u.value===undefined)delete ia[S].ds[u.name];else ia[S].ds[u.name]=u.value instanceof Array?u.value.slice(0):u.value;$.each(ia[S].views,function(ga,oa){Ga!==oa&&oa.contents&&oa.contents.trigger("UpdateElementEvent",[u])})}}function z(m){var u=
false;if($.isEmptyObject(m))u=true;else{u=true;for(var C in m)if(m.hasOwnProperty(C))if(sc.test(C)){if(m[C]&&m[C].indexOf("isnull")>=0){u=false;break}}else if(Xb.test(C)||Wb.test(C)||yb.test(C)){u=false;break}}if(u)return false;for(C in m)if(m.hasOwnProperty(C)){if(m[C]===undefined||m[C]==="")return false;if($.isArray(m[C])&&m[C].length===0)return false}return true}function H(m,u){u=u||ia[S].ds;if(!z(u)){u=$.Event("InvalidInputEvent");u.ephemeral=true;u.message="No value has been specified.";$(m.target).trigger(u);
return false}u=G(u);$(m.target).trigger("UpdateQueryEvent",[u]);return true}function aa(){Ga.contents.triggerHandler("UpdateQueryButtonClicked")}function O(m){m.reason=m.reason?"_"+m.reason:"";var u=ia[S].invalid_fields,C=$(m.target).attr("name");$.each(ia[S].views,function(va,ra){ra.contents&&ra.contents.find("[name="+C+"]").addClass("invalid"+m.reason);ra.contents&&ra.contents.find("[name="+C+"]").children().addClass("invalid"+m.reason)});var X=m.message?m.message:"This query contains invalid input, please correct any invalid fields.",
ga=false;$.each(k.find(".error"),function(va,ra){ra=$(ra);va=ra.data("ref_count");if(ra.text()===X){ga=true;if(!m.ephemeral)if(u[C+m.reason]===undefined){u[C+m.reason]=ra;ra.data("ref_count",va+1)}else if(ra.text()!==u[C+m.reason].text()){var cb=u[C+m.reason].data("ref_count");u[C+m.reason].data("ref_count",cb-1);u[C+m.reason].data("ref_count")===0&&u[C+m.reason].remove();u[C+m.reason]=ra;ra.data("ref_count",va+1)}}});if(!ga){var oa=$('<div class="error">'+X+"</div>");oa.data("ref_count",1);m.ephemeral||
(u[C+m.reason]=oa);k.prepend(oa);m.ephemeral?oa.fadeOut(3E3,function(){oa.remove()}):k.find("#add_to_query").attr("disabled","true")}}function V(m){m.reason=m.reason?"_"+m.reason:"";var u=ia[S].invalid_fields,C=$(m.target).attr("name");$.each(ia[S].views,function(ga,oa){oa.contents&&oa.contents.find("[name="+C+"]").removeClass("invalid"+m.reason);oa.contents&&oa.contents.find("[name="+C+"]").children().removeClass("invalid"+m.reason)});var X=u[C+m.reason].data("ref_count")-1;X===0?u[C+m.reason].remove():
u[C+m.reason].data("ref_count",X);delete ia[S].invalid_fields[C+m.reason];$.isEmptyObject(ia[S].invalid_fields)&&k.find("#add_to_query").attr("disabled","")}function za(m){var u=document.createElement("link");u.type="text/css";u.rel="stylesheet";u.href=m;document.getElementsByTagName("head")[0].appendChild(u)}function ea(m,u){u=u||function(){};m.css&&za(m.css);m.js?require([m.js],function(){u(m)}):u(m)}function Oa(m){m=Ib(m);S=parseInt(m.id);m.globalsLoaded=true;m.views.length<2?n.hide():n.show();
var u=$.jqote(Nb,m.views);n.html(u);if(m["static"]){k.append(m["static"]);Mb=k.find("#add_to_query")}else{k.append(Jb);Mb=k.find("#add_to_query");Mb.click(function(){var C=$.Event("UpdateQueryButtonClicked");$(this).trigger(C)})}if($.inArray(S,Hb)>=0){Mb.html('<span class="iconic arrow-up"></span> Update Condition');$(".inquery",k).show()}else{Mb.html('<span class="iconic plus"></span> Add Condition');$(".inquery",k).hide()}n.children(":first").click()}function kc(m,u){m=n.children().index(u);n.trigger("ShowViewEvent",
m)}function Ib(m){if(ia[m.id]===undefined)ia[m.id]=m;else{$.extend(ia[m.id],m);m=ia[m.id]}if(!m.ds)m.ds=m.query?B(m.query):{};if(!m.invalid_fields)m.invalid_fields={};return m}function Rb(m,u){if(parseInt(m.id)!==S){if(u)m.query=u;if(S!==null)ia[S]["static"]=k.children().detach();ia[m.id]&&ia[m.id].globalsLoaded?Oa(m):ea(m,Oa)}}var ia={},Nb='<a class="tab" href="#"><%= this.tabname %></a> ',Jb='<div class="inquery">Condition has been added.</div>';Jb+='<button id="add_to_query"></button>';var S=null,
Ga=null,Mb=null,Hb=[],yb=/^(\d+)_(\d+(?:OR\d+)*)_input([01])$/,Wb=/^(\d*)_(\d+(?:OR\d+)*)$/,sc=/^(\d*)_(\d+(?:OR\d+)*)_operator$/,Xb=/^\d+(?:OR\d+)+$/,kb=/-/,fc={"in":"exact","-in":"-exact",exact:"exact","-exact":"-exact"},Ra={exact:"in","-exact":"-in"},Yb={"true":true,"false":false,"null":null};v.bind({ViewReadyEvent:g,ViewErrorEvent:A,ShowViewEvent:q,ElementChangedEvent:t,UpdateQueryButtonClicked:aa,InvalidInputEvent:O,InputCorrectedEvent:V,ConstructQueryEvent:H,ConceptDeletedEvent:i,ConceptAddedEvent:p});
n.bind("ConceptTabClickedEvent",kc);n.tabs(true,function(m,u){u.trigger("ConceptTabClickedEvent",u)});return{show:Rb,isConceptLoaded:function(m){return m in ia},buildQuery:G,constructQueryHandler:H}}}});
require.def("define/criteria",["define/templates"],function(o){var v=$.jqotec(o.scope_element);return{Criteria:function(D,n,h){function k(){var i=$.Event("ShowConceptEvent");i.constraints=p.data("constraint");p.trigger(i)}var p=$($.jqote(v,{pk:D.concept_id,description:h,uri:n+D.concept_id}));p.data("constraint",D);p.find(".remove-criterion").click(function(){p.trigger("CriteriaRemovedEvent")});p.find(".field-anchor").click(k);return p}}});
require.def("define/criteriamanager",["define/criteria","define/templates","lib/json2"],function(o,v){return{Manager:function(D){var n={},h=D.find("#criteria-list"),k=D.find(".content"),p=D.find("#remove-criteria"),i=h.attr("data-uri"),y=h.attr("data-report"),G=D.attr("data-uri"),B=h.children(),g=$(v.run_query);$.getJSON(G,function(q){q.store===null||$.isEmptyObject(q.store)||(q.store.hasOwnProperty("concept_id")?D.triggerHandler("UpdateQueryEvent",[q.store,true]):$.each(q.store.children.reverse(),
function(A,t){D.triggerHandler("UpdateQueryEvent",[t,true])}))});g.click(function(){var q=[];for(var A in n)n.hasOwnProperty(A)&&q.push(n[A].data("constraint"));$.putJSON(G,JSON.stringify(q.length<2?q[0]:{type:"and",children:q}),function(){window.location=y})});p.click(function(){for(var q in n)n.hasOwnProperty(q)&&n[q].trigger("CriteriaRemovedEvent")});D.bind("UpdateQueryEvent",function(q,A,t){var z=A.concept_id,H;if($.isEmptyObject(n)){B.detach();k.append(g)}g.attr("disabled","true");$.postJSON(i,
JSON.stringify(A),function(aa){g.removeAttr("disabled");var O=$.isEmptyObject(n);if(n.hasOwnProperty(z)){H=o.Criteria(A,i,aa);n[z].replaceWith(H);H.fadeTo(300,0.5,function(){H.fadeTo("fast",1)})}else{H=o.Criteria(A,i,aa);t?h.prepend(H):h.append(H);aa=$.Event("ConceptAddedEvent");aa.concept_id=z;D.trigger(aa)}n[z]=H;if(!t){H.addClass("selected");H.siblings().removeClass("selected")}O&&$(h.children()[0]).find(".field-anchor").click()},"text/plain")});D.bind("CriteriaRemovedEvent",function(q){q=$(q.target).data("constraint");
n[q.concept_id].remove();delete n[q.concept_id];var A=$.Event("ConceptDeletedEvent");A.concept_id=q.concept_id;D.trigger(A);if($.isEmptyObject(n)){h.append(B);g.detach()}});D.bind("ShowConceptEvent",function(q){var A=$(q.target);h.children(".criterion").removeClass("selected");if(A.is(".criterion"))A.addClass("selected");else{q=q.originalEvent.concept_id;n[q]&&n[q].addClass("selected")}});return{retrieveCriteriaDS:function(q){var A=null;q&&$.each(h.children(),function(t,z){if($(z).data("constraint"))if($(z).data("constraint").concept_id==
q)A=$(z).data("constraint")});return A}}}}});require.def("html5fix",function(){$(function(){Modernizr.input.placeholder||$("input[placeholder]").placeholder();Modernizr.input.autofocus||$("input[autofocus]").focus()})});
require(["define/search","define/conceptmanager","define/criteriamanager","html5fix","ajaxsetup","extensions","sanitizer"],function(o,v,D){$(function(){o.init();var n=$("#content"),h=$("#plugin-tabs"),k=$("#plugin-panel"),p=$("#plugin-title"),i=$("#user-criteria"),y=$("#plugin-static-content"),G=$("#plugin-dynamic-content"),B=$("#criteria");$("body").ajaxComplete(function(){OVERLAY.fadeOut()});var g=v.manager(k,p,h,G,y),q=D.Manager(i);n.bind("UpdateQueryEvent",function(t,z){i.triggerHandler("UpdateQueryEvent",
[z])});n.bind("ConceptAddedEvent ConceptDeletedEvent",function(t){k.trigger(t)});n.bind("ShowConceptEvent",function(t){var z=$(t.target),H=z.attr("data-id"),aa=t.constraints;if($(t.target).is(".criterion"))B.children(".active").removeClass("active");else{t.concept_id=z.attr("data-id");i.triggerHandler(t)}aa||(aa=q.retrieveCriteriaDS(H));if(g.isConceptLoaded(H)){k.fadeIn(100);g.show({id:H},aa)}else $.ajax({url:z.attr("data-uri"),dataType:"json",success:function(O){k.fadeIn(100);g.show(O,aa)}})});n.bind("activate-criterion",
function(t,z){t=z?B.children("[data-id="+z+"]"):$(t.target);z=z||t.attr("data-id");t.addClass("active").siblings().removeClass("active");t.trigger("ShowConceptEvent");n.trigger("setid-tab",[z]);return false});$("[data-model=criterion]").live("click",function(){$(this).trigger("activate-criterion");return false});var A=$('<div id="description"></div>').appendTo("body");$("#criteria").delegate("div > .info","mouseover",function(){var t=$(this).parent(),z=t.offset(),H=t.outerWidth();t=t.children(".description").html();
A.html(t);A.css({left:z.left+H+20,top:z.top}).show()}).delegate("div > .info","mouseout",function(){A.hide()})})});define("define/main",function(){});var OVERLAY=$("#overlay");$("body").bind({ajaxComplete:function(o,v){if(v.status===302){o=$.parseJSON(v.responseText);if(o.redirect)window.location=o.redirect}},ajaxError:function(){}});define("ajaxsetup",function(){});
if(!Array.prototype.map)Array.prototype.map=function(o,v){var D=this.length>>>0;if(typeof o!="function")throw new TypeError;for(var n=new Array(D),h=0;h<D;h++)if(h in this)n[h]=o.call(v,this[h],h,this);return n};
(function(o){o.extend({putJSON:function(v,D,n,h){return o.ajax({type:"PUT",url:v,contentType:"application/json",data:D,success:n,dataType:h})},postJSON:function(v,D,n,h){return o.ajax({type:"POST",url:v,contentType:"application/json",data:D,success:n,dataType:h})},log:function(v){window.console?console.log(v):alert(v)},jqoteobj:function(v,D,n){out=o.jqote(v,D,n);return o(out)}});o.fn.placeholder=function(v){var D=this;D.each(function(){var n=o(this),h=n.css("color");v=v||n.attr("placeholder");if(!n.is("input")&&
!n.is("textarea"))return D;if(n.val()===""||n.val()===v)n.val(v).css("color","#999");n.focus(function(){n.val()===v&&n.css("color",h).val("")}).blur(function(){n.css("color",h);n.val()===""&&n.css("color","#999").val(v)})});return this};o.fn.jdata=function(v,D){var n=o.grep(this,function(h){return o(h).data(v)==D});return o(n)};o.fn.autocomplete2=function(v,D,n,h){if(!this.is("input[type=text]")&&!this.is("input[type=search]"))throw new TypeError("A text or search field is required");D=D||null;n=
n||300;h=h||false;var k=o.extend({},v),p=k.success||function(){},i=k.error||function(){},y=k.start||function(){},G=k.end||function(){};k.data={};return this.each(function(B){var g=o(this),q,A,t,z=null,H=null,aa=null,O=false;q=g.closest("form").submit(function(){return false});k.url=q.attr("action");k.success=function(za,ea,Oa){p(A,za,ea,Oa);if(aa==null&&h)aa={resp:za,status:ea,xhr:Oa};if(t&&ea=="success")g.cache[A]=za;z=A;O=false;k.end()};k.error=function(za,ea,Oa){i(A,za,ea,Oa);k.end()};k.start=
function(){O=true;y(A)};k.end=function(){O=false;G()};var V="search-"+B;g.cache={};g.bind(V,function(za,ea,Oa){t=Oa?true:false;A=ea;if(t&&g.cache[A])k.success(g.cache[A],"cached",null);else{clearTimeout(H);if(D!==null&&A===D)A="";A=SearchSanitizer.clean(A).toLowerCase();if(A!==z){O==false&&k.start();k.data.q=A;H=setTimeout(function(){h&&aa?k.success(aa.resp,aa.status,aa.xhr):o.ajax(k)},n)}else k.end()}});g.keyup(function(){g.trigger(V,[this.value]);return false})})};o.fn.tabs=function(){var v={nextTab:function(h,
k,p,i){k=k===undefined?h.data("tabindex"):k;p=p||h.attr("children").length;i=i===undefined?0:i+1;if(i==p)return null;if(p+1<=k)return this.nextTab(h,0,p,i);if(h.children(":nth("+k+")").hasClass("disabled"))return this.nextTab(h,k+1,p,i);return k},getTab:function(h,k){return h.children(":nth("+k+")")}},D={init:function(h,k,p){h.data("tabified",true);k=k===true?true:false;p=p||function(){};var i=h.children(".tab");k?o(".tab",h).live("click",n(p)):i.click(n(p));i.filter(".tab-selected").length===0&&
i.not(".disabled").filter(":first").click()},toggle:function(h,k){v.getTab(h,k).click();h.data("tabindex",k)},disable:function(h,k){v.getTab(h,k).addClass("disabled").removeClass("tab-selected");nindex=v.nextTab(h,k);nindex!==null&&this.toggle(h,nindex)},enable:function(h,k){v.getTab(h,k).removeClass("disabled")}},n=function(h){return function(k){k.preventDefault();var p=o(this).not(".disabled");if(p.length==0||p.hasClass("tab-selected"))return false;var i=p.siblings(".tab");p.addClass("tab-selected");
i.removeClass("tab-selected");h(k,p)}};return function(h,k){if(typeof h==="string"){if(this.data("tabified")===null)throw new TypeError("tabs have not been initialized yet");D[h](this,k)}else D.init(this,h,k);return this}}()})(jQuery);define("extensions",function(){});
var SearchSanitizer={regexes:{truncateWhiteSpace:[/\s{2,}/g," "],removeNonAlphaNumeric:[/[^\sA-Za-z0-9]/g,""],removeStopWords:[/\b(a|able|about|across|after|all|almost|also|am|among|an|and|any|are|as|at|be|because|been|but|by|can|cannot|could|dear|did|do|does|either|else|ever|every|for|from|get|got|had|has|have|he|her|hers|him|his|how|however|i|if|in|into|is|it|its|just|least|let|like|likely|may|me|might|most|must|my|neither|no|nor|not|of|off|often|on|only|or|other|our|own|rather|said|say|says|she|should|since|so|some|than|that|the|their|them|then|there|these|they|this|tis|to|too|twas|us|wants|was|we|were|what|when|where|which|while|who|whom|why|will|with|would|yet|you|your)\b/g,""],
trimRightWhiteSpace:[/^\s+/,""],trimLeftWhiteSpace:[/\s+$/,""]},clean:function(o){for(var v in this.regexes){var D=this.regexes[v];o=o.replace(D[0],D[1])}return o}};define("sanitizer",function(){});var JSON=JSON||{};
(function(){function o(G){return G<10?"0"+G:G}function v(G){h.lastIndex=0;return h.test(G)?'"'+G.replace(h,function(B){var g=i[B];return typeof g==="string"?g:"\\u"+("0000"+B.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+G+'"'}function D(G,B){var g,q,A=k,t,z=B[G];if(z&&typeof z==="object"&&typeof z.toJSON==="function")z=z.toJSON(G);if(typeof y==="function")z=y.call(B,G,z);switch(typeof z){case "string":return v(z);case "number":return isFinite(z)?String(z):"null";case "boolean":case "null":return String(z);
case "object":if(!z)return"null";k+=p;t=[];if(Object.prototype.toString.apply(z)==="[object Array]"){q=z.length;for(G=0;G<q;G+=1)t[G]=D(G,z)||"null";B=t.length===0?"[]":k?"[\n"+k+t.join(",\n"+k)+"\n"+A+"]":"["+t.join(",")+"]";k=A;return B}if(y&&typeof y==="object"){q=y.length;for(G=0;G<q;G+=1){g=y[G];if(typeof g==="string")if(B=D(g,z))t.push(v(g)+(k?": ":":")+B)}}else for(g in z)if(Object.hasOwnProperty.call(z,g))if(B=D(g,z))t.push(v(g)+(k?": ":":")+B);B=t.length===0?"{}":k?"{\n"+k+t.join(",\n"+k)+
"\n"+A+"}":"{"+t.join(",")+"}";k=A;return B}}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+o(this.getUTCMonth()+1)+"-"+o(this.getUTCDate())+"T"+o(this.getUTCHours())+":"+o(this.getUTCMinutes())+":"+o(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()}}var n=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,
h=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,k,p,i={"\u0008":"\\b","\t":"\\t","\n":"\\n","\u000c":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},y;if(typeof JSON.stringify!=="function")JSON.stringify=function(G,B,g){var q;p=k="";if(typeof g==="number")for(q=0;q<g;q+=1)p+=" ";else if(typeof g==="string")p=g;if((y=B)&&typeof B!=="function"&&(typeof B!=="object"||typeof B.length!=="number"))throw new Error("JSON.stringify");return D("",
{"":G})};if(typeof JSON.parse!=="function")JSON.parse=function(G,B){function g(q,A){var t,z,H=q[A];if(H&&typeof H==="object")for(t in H)if(Object.hasOwnProperty.call(H,t)){z=g(H,t);if(z!==undefined)H[t]=z;else delete H[t]}return B.call(q,A,H)}n.lastIndex=0;if(n.test(G))G=G.replace(n,function(q){return"\\u"+("0000"+q.charCodeAt(0).toString(16)).slice(-4)});if(/^[\],:{}\s]*$/.test(G.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){G=eval("("+G+")");return typeof B==="function"?g({"":G},""):G}throw new SyntaxError("JSON.parse");}})();define("lib/json2",function(){});
(function(o){function v(g,q){throw o.extend(g,q),g;}function D(g){var q=[];if(B.call(g)!==k)return h;for(var A=0,t=g.length;A<t;A++)q[A]=g[A].id;return q.length?q.sort().join(".").replace(/(\b\d+\b)\.(?:\1(\.|$))+/g,"$1$2"):h}function n(g,q){var A=[];q=q||y;var t=B.call(g);if(t===p)return g.jqote_id?[g]:h;if(t!==k)return[o.jqotec(g,q)];return A.length?A:h}var h=false,k="[object Array]",p="[object Function]",i=1,y="%",G=/^[^<]*(<[\w\W]+>)[^>]*$/,B=Object.prototype.toString;o.fn.extend({jqote:function(g,
q){g=B.call(g)===k?g:[g];var A="";this.each(function(t){for(var z=o.jqotec(this,q),H=0;H<g.length;H++)A+=z.call(g[H],t,H,g,z)});return A}});o.each({app:"append",pre:"prepend",sub:"html"},function(g,q){o.fn["jqote"+g]=function(A,t,z){var H,aa=o.jqote(A,t,z),O=!G.test(aa)?function(V){return o(document.createTextNode(V))}:o;if(A=D(n(A)))H=new RegExp("(^|\\.)"+A.split(".").join("\\.(.*)?")+"(\\.|$)");return this.each(function(){var V=O(aa);o(this)[q](V);(V[0].nodeType===3?o(this):V).trigger("jqote."+
g,[V,H])})}});o.extend({jqote:function(g,q){var A="";g=n(g);g===h&&v(new Error("Empty or undefined template passed to $.jqote"),{type:"UndefinedTemplateError"});q=B.call(q)!==k?[q]:q;for(var t=0,z=g.length;t<z;t++)for(var H=0;H<q.length;H++)A+=g[t].call(q[H],t,H,q,g[t]);return A},jqotec:function(g,q){var A,t;q=q||y;A=B.call(g);if(A==="[object String]"&&G.test(g)){A=t=g;if(g=o.jqotecache[g])return g}else{A=A==="[object String]"||g.nodeType?o(g):g instanceof jQuery?g:null;if(!A[0]||!(t=A[0].innerHTML))v(new Error("Empty or undefined template passed to $.jqotec"),
{type:"UndefinedTemplateError"});if(g=o.jqotecache[o.data(A[0],"jqote_id")])return g}g="";q=t.replace(/\s*<!\[CDATA\[\s*|\s*\]\]>\s*|[\r\n\t]/g,"").split("<"+q).join(q+">\u001b").split(q+">");t=0;for(var z=q.length;t<z;t++)g+=q[t].charAt(0)!=="\u001b"?"out+='"+q[t].replace(/([^\\])?(["'])/g,"$1\\$2")+"'":q[t].charAt(1)==="="?";out+=("+q[t].substr(2)+");":";"+q[t].substr(1);g="try{"+('var out="";'+g+";return out;").split("out+='';").join("").split('var out="";out+=').join("var out=")+'}catch(e){e.type="TemplateExecutionError";e.args=arguments;e.template=arguments.callee.toString();throw e;}';
try{var H=new Function("i, j, data, fn",g)}catch(aa){v(aa,{type:"TemplateCompilationError"})}A=A instanceof jQuery?o.data(A[0],"jqote_id",i):A;return o.jqotecache[A]=(H.jqote_id=i++,H)},jqotefn:function(g){g=B.call(g)==="[object String]"&&G.test(g)?g:o.data(o(g)[0],"jqote_id");return o.jqotecache[g]||h},jqotetag:function(g){y=g},jqotecache:{}});o.event.special.jqote={add:function(g){g=!g.data?[]:B.call(g.data)!==k?[g.data]:g.data;!g.length||D(n(g))}}})(jQuery);define("lib/jquery.jqote2",function(){});
require.def("define/form",[],{Form:function(o,v){var D={"true":true,"false":false,"null":null},n=/^(\d*)_(\d+(?:OR\d+)*)_operator$/,h=$('<span class="form_container"></span>');$.each(o.fields,function(p,i){p=[];switch(i.datatype){case "nullboolean":p=['<label for="<%=this.field_id%>"><%=this.label%></label>','<select data-datatype="nullboolean"data-optional="<%=this.optional%>"  multiple id ="<%=this.field_id%>" name="<%=this.field_id%>">','<option <%=this["default"]===true?"selected":""%> value="true">Yes</option>',
'<option <%=this["default"]===false?"selected":""%> value="false">No</option>','<option <%=this["default"]===null?"selected":""%> value="null">No Data</option>',"</select>"];break;case "boolean":i.optional||(p=['<input type="checkbox" name="<%=this.field_id%>" value="<%=this.field_id%>" <%= this["default"] ? "checked":""%>/>','<label for="<%=this.field_id%>"><%=this.label%></label>']);break;case "number":p=['<label for="<%=this.field_id%>"><%=this.label%></label>','<select id="<%=this.field_id%>_operator" name="<%=this.field_id%>_operator">',
'<option selected id="<%=this.field_id%>" value="range">is between</option><option id="<%=this.field_id%>" value="-range">is not between</option><option id="<%=this.field_id%>" value="lt">is less than</option><option id="<%=this.field_id%>" value="gt">is greater than</option><option id="<%=this.field_id%>" value="lte">is less than or equal to</option><option id="<%=this.field_id%>" value="gte">is greater than or equal to</option><option id="<%=this.field_id%>" value="exact">is equal to</option><option id="<%=this.field_id%>" value="-exact">is not equal to</option><option id="<%=this.field_id%>" value="isnull">is null</option><option id="<%=this.field_id%>" value="-isnull">is not null</option>',
"</select>",'<span class="input_association" name="<%=this.field_id%>_input_assoc">','<input data-validate="decimal" id="<%=this.field_id%>_input0" type="text" name="<%=this.field_id%>_input0" size="5">','<label for="<%=this.field_id%>_input1">and</label>','<input data-validate="decimal" id="<%=this.field_id%>_input1" type="text" name="<%=this.field_id%>_input1" size="5">',"</span>"];break;case "string":p=["<% if (this.choices) {%>",'<label for="<%=this.field_id%>"><%=this.label%></label>','<select id="<%=this.field_id%>-operator" name="<%=this.field_id%>_operator">',
'<option selected value="in">is equal to</option><option value="-in">is not equal to</option>',"</select>",'<select multiple="multiple" id="<%=this.field_id%>-value" name="<%=this.field_id%>" size="3" data-optional="<%=this.optional%>" >',"<% for (var index = 0; index < this.choices.length; index++) { %>",'<option value="<%=this.choices[index][0]%>"><%=this.choices[index][1]%></option>',"<%}%>","</select>","<%} else {%>",'<label for="<%=this.field_id%>"><%=this.label%></label>','<select id="<%=this.field_id%>-operator" name="<%=this.field_id%>_operator">',
'<option selected value="iexact">is equal to</option><option value="-iexact">is not equal to</option><option value="in">is one of</option><option value="-in">is not one of</option>',"</select>",'<input data-optional="<%=this.optional%>" type="text" id="<%=this.field_id%>_text" name="<%=this.field_id%>" size = "10">',"<%}%>"];break;case "string-list":p=['<label for="<%=this.field_id%>"><%=this.label%></label>','<select id="<%=this.field_id%>-operator" name="<%=this.field_id%>_operator">','<option selected value="in">is equal to</option><option value="-in">is not equal to</option>',
"</select>",'<textarea data-optional="<%=this.optional%>" id="<%=this.field_id%>_text" name="<%=this.field_id%>" rows="8" cols="25"></textarea>'];break}p.unshift("<p>");p.push("</p>");i.hasOwnProperty("pk")||(p=p.concat(['<p><label for="<%=this.pkchoice_id%>"><%=this.pkchoice_label%></label>','<select id="<%=this.pkchoice_id%>" name="<%=this.pkchoice_id%>">',"<% for (index in this.pkchoices) { %>",'<option value="<%=this.pkchoices[index][0]%>" <%=this.pkchoices[index][0]==this.pkchoice_default ? "selected":""%>><%=this.pkchoices[index][1]%></option>',
"<%}%>","</select></p>"]));$.each(["choices","pkchoices"],function(B,g){i[g]&&$.each(i[g],function(q){if(i[g][q][0]===null)i[g][q][0]="null";if(i[g][q][1]==="None")i[g][q][1]="No Data"})});var y=null,G=null;if(i.hasOwnProperty("pk"))y=v+"_"+i.pk;else{y=$.map(i.pkchoices,function(B){return parseInt(B[0])});y.sort();G=y.join("OR");y=v+"_"+G}p=$($.jqote(p.join(""),{choices:i.choices,field_id:y,label:i.name,pkchoices:i.pkchoices,pkchoice_label:i.pkchoice_label,pkchoice_id:G,optional:i.hasOwnProperty("optional")?
i.optional:false,"default":i.hasOwnProperty("default")?i["default"]:0,pkchoice_default:i.hasOwnProperty("pkchoice_default")?i.pkchoice_default:0}));p.children().not("span").wrap("<span/>");h.append(p)});$("input,select,textarea",h).bind("change keyup",function(p){var i=$(p.target);if($.contains(h.get(0),i.get(0))){var y,G;switch(p.target.type){case "checkbox":y=p.target.checked;y=i.is(":visible")&&i.is(":enabled")?y:undefined;h.trigger("ElementChangedEvent",[{name:p.target.name,value:y}]);break;case "select-one":case "select-multiple":case "select":var B=
[],g=null,q=n.exec(i.attr("name"));if(q)g=$("[name^="+q[1]+"_"+q[2]+"]",h).not(i).not("span");$("option",$(p.target)).each(function(z,H){if(H.selected){B.push(H.value);if(g&&g.attr("data-validate")==="decimal")if(H.value.search(/range/)>=0){$("input[name="+H.id+"_input1]",h).show().change();$("label[for="+H.id+"_input1]",h).show();$("input[name="+H.id+"_input0]",h).show().change()}else if(H.value.search(/null/)>=0){$("input[name="+H.id+"_input1],",h).hide().change();$("label[for="+H.id+"_input1]",
h).hide();$("input[name="+H.id+"_input0]",h).hide().change()}else{$("input[name="+H.id+"_input1],",h).hide().change();$("label[for="+H.id+"_input1]",h).hide();$("input[name="+H.id+"_input0]",h).show().change()}else if(g&&g.attr("type")in{text:1,textarea:1})if(H.value.search(/exact/)>=0&&g.attr("type")==="textarea"){g.data("switch").data("switch",g);g.before(g.data("switch")).detach();g.data("switch").keyup()}else if(H.value.search(/in/)>=0&&g.attr("type")==="text")if(g.data("switch")){g.data("switch").data("switch",
g);g.before(g.data("switch")).detach();g.data("switch").keyup()}else{z=$('<textarea rows="8" id="'+g.attr("id")+'" name="'+g.attr("name")+'" cols="25"></textarea>').data("switch",g);z.bind("keyup",g.data("events").keyup[0].handler);g.before(z).detach();G=h.data("datasource")||[];if(G[g.attr("name")]instanceof Array)k(null,{name:g.attr("name"),value:G[g.attr("name")]});else typeof G[g.attr("name")]==="string"?k(null,{name:g.attr("name"),value:[G[g.attr("name")]]}):k(null,{name:g.attr("name"),value:[]});
z.keyup()}}});if(p.target.type==="select-multiple"){q=[];for(y in B){var A=B[y];q.push(A in D?D[A]:A)}y=i.is("[data-optional=true]")?q.length?q:undefined:q}else y=B[0]in D?D[B[0]]:B[0];y=i.is(":visible")&&i.is(":enabled")?y:undefined;h.trigger("ElementChangedEvent",[{name:p.target.name,value:y}]);break;case "textarea":y=i.is(":visible")&&i.is(":enabled")?i.val().split("\n"):undefined;h.trigger("ElementChangedEvent",[{name:p.target.name,value:y}]);break;default:y=$(p.target).closest("p").find("select").val();
q=p.target.name.substr(0,p.target.name.length-1);switch(i.attr("data-validate")){case "decimal":A=$("input[name="+q+"0]",h);q=$("input[name="+q+"1]",h);A=parseFloat(A.val());var t=parseFloat(q.val());if(i.is(":visible")&&isNaN(Number(i.val()))){y=$.Event("InvalidInputEvent");i.trigger(y)}else if($(p.target).hasClass("invalid")){y=$.Event("InputCorrectedEvent");i.trigger(y)}else if(y.search(/range/)>=0&&A>t){y=$.Event("InvalidInputEvent");y.reason="badrange";y.message="First input must be less than second input.";
i.parent().trigger(y)}else if($(p.target).parent().hasClass("invalid_badrange")&&(q.css("display")==="none"||A<t)){y=$.Event("InputCorrectedEvent");y.reason="badrange";i.parent().trigger(y)}break;default:break}y=i.is(":visible")&&i.is(":enabled")?i.val():undefined;h.trigger("ElementChangedEvent",[{name:p.target.name,value:y}]);break}p.stopPropagation()}});var k=function(p,i){p=$("[name="+i.name+"]",h);if(p.length!==0)switch(p.attr("type")){case "checkbox":p.attr("checked",i.value);break;case "select-multiple":$("option",
p).each(function(y,G){y=$.map(i.value,function(B){return typeof B in{string:1,number:1}?B:String(B)});G.selected=$.inArray(G.value,y)!=-1?true:false});break;case "textarea":p.val(i.value.join("\n"));break;default:if(i.value instanceof Array)break;p.attr("value",typeof i.value in{string:1,number:1}?i.value:String(i.value));break}};h.bind("UpdateElementEvent",k);h.bind("UpdateDSEvent",function(p,i){for(var y in i)k(null,{name:y,value:i[y]});h.data("datasource",i)});h.bind("GainedFocusEvent",function(){$("input,select",
h).change()});h.bind("HideDependentsEvent",function(){$("input,select,label",h).attr("disabled","true").change()});h.bind("ShowDependentsEvent",function(){$("input,select,label",h).filter(":disabled").removeAttr("disabled").change()});return h}});define("define/form",function(){});var Base=function(){};
Base.extend=function(o,v){var D=Base.prototype.extend;Base._prototyping=true;var n=new this;D.call(n,o);n.base=function(){};delete Base._prototyping;var h=n.constructor,k=n.constructor=function(){if(!Base._prototyping)if(this._constructing||this.constructor==k){this._constructing=true;h.apply(this,arguments);delete this._constructing}else if(arguments[0]!=null)return(arguments[0].extend||D).call(arguments[0],n)};k.ancestor=this;k.extend=this.extend;k.forEach=this.forEach;k.implement=this.implement;
k.prototype=n;k.toString=this.toString;k.valueOf=function(p){return p=="object"?k:h.valueOf()};D.call(k,v);typeof k.init=="function"&&k.init();return k};
Base.prototype={extend:function(o,v){if(arguments.length>1){var D=this[o];if(D&&typeof v=="function"&&(!D.valueOf||D.valueOf()!=v.valueOf())&&/bbaseb/.test(v)){var n=v.valueOf();v=function(){var G=this.base||Base.prototype.base;this.base=D;var B=n.apply(this,arguments);this.base=G;return B};v.valueOf=function(G){return G=="object"?v:n};v.toString=Base.toString}this[o]=v}else if(o){var h=Base.prototype.extend;if(!Base._prototyping&&typeof this!="function")h=this.extend||h;for(var k={toSource:null},
p=["constructor","toString","valueOf"],i=Base._prototyping?0:1;y=p[i++];)o[y]!=k[y]&&h.call(this,y,o[y]);for(var y in o)k[y]||h.call(this,y,o[y])}return this}};
Base=Base.extend({constructor:function(o){this.extend(o)}},{ancestor:Object,version:"1.1",forEach:function(o,v,D){for(var n in o)this.prototype[n]===undefined&&v.call(D,o[n],n,o)},implement:function(){for(var o=0;o<arguments.length;o++)typeof arguments[o]=="function"?arguments[o](this.prototype):this.prototype.extend(arguments[o]);return this},toString:function(){return String(this.valueOf())}});define("lib/base",function(){});
(function(){function o(a,b){a||(a={});for(var c in b)a[c]=b[c];return a}function v(a){return a!==m&&a!==null}function D(a,b,c){var d,e;if(typeof b=="string")if(v(c))a.setAttribute(b,c);else{if(a&&a.getAttribute)e=a.getAttribute(b)}else if(v(b)&&typeof b=="object")for(d in b)a.setAttribute(d,b[d]);return e}function n(a){if(!a||a.constructor!=Array)a=[a];return a}function h(){var a=arguments,b,c;for(b=0;b<a.length;b++){c=a[b];if(v(c))return c}}function k(a){var b="",c;for(c in a)b+=Dc(c)+":"+a[c]+";";
return b}function p(a,b){if(Ga)if(b&&b.opacity!==m)b.filter="alpha(opacity="+b.opacity*100+")";o(a.style,b)}function i(a,b,c,d,e){a=O.createElement(a);b&&o(a,b);e&&p(a,{padding:0,border:ra,margin:0});c&&p(a,c);d&&d.appendChild(a);return a}function y(){var a=Ra.global.useUTC;tc=a?Date.UTC:function(b,c,d,e,f,j){return(new Date(b,c,h(d,1),h(e,0),h(f,0),h(j,0))).getTime()};Ec=a?"getUTCMinutes":"getMinutes";Fc=a?"getUTCHours":"getHours";Gc=a?"getUTCDay":"getDay";lc=a?"getUTCDate":"getDate";uc=a?"getUTCMonth":
"getMonth";vc=a?"getUTCFullYear":"getFullYear";Zc=a?"setUTCMinutes":"setMinutes";$c=a?"setUTCHours":"setHours";Hc=a?"setUTCDate":"setDate";ad=a?"setUTCMonth":"setMonth";bd=a?"setUTCFullYear":"setFullYear"}function G(a){Ra=Ma(Ra,a);y();return Ra}function B(){return Ra}function g(a){fc||(fc=i(u));a&&fc.appendChild(a);fc.innerHTML=""}function q(a,b){var c=function(){};c.prototype=new a;o(c.prototype,b);return c}function A(a,b,c,d){var e=Ra.lang;a=a;var f=isNaN(b=ia(b))?2:b;b=c===undefined?e.decimalPoint:
c;d=d===undefined?e.thousandsSep:d;e=a<0?"-":"";c=parseInt(a=ia(+a||0).toFixed(f),10)+"";var j=(j=c.length)>3?j%3:0;return e+(j?c.substr(0,j)+d:"")+c.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+d)+(f?b+ia(a-c).toFixed(f).slice(2):"")}function t(a){for(var b={x:a.offsetLeft,y:a.offsetTop};a.offsetParent;){a=a.offsetParent;b.x+=a.offsetLeft;b.y+=a.offsetTop;if(a!=O.body&&a!=O.documentElement){b.x-=a.scrollLeft;b.y-=a.scrollTop}}return b}function z(){}function H(a,b){function c(F,s){function P(){var w=[],
L;ja=pa=null;xa=[];J(Va,function(N){L=false;J(["xAxis","yAxis"],function(ba){if(N.isCartesian&&(ba=="xAxis"&&na||ba=="yAxis"&&!na)&&(N.options[ba]==s.index||N.options[ba]===m&&s.index===0)){N[ba]=ya;xa.push(N);L=true}});if(!N.visible&&sa.ignoreHiddenSeries)L=false;if(L){var U,ca;if(!na){U=N.options.stacking;wc=U=="percent";if(U){ca=w[N.type]||[];w[N.type]=ca}if(wc){ja=0;pa=99}}if(N.isCartesian){J(N.data,function(ba){var ka=ba.x,Ia=ba.y;if(ja===null)ja=pa=ba[Kb];if(na)if(ka>pa)pa=ka;else{if(ka<ja)ja=
ka}else if(v(Ia)){if(U)ca[ka]=ca[ka]?ca[ka]+Ia:Ia;ba=ca?ca[ka]:Ia;if(!wc)if(ba>pa)pa=ba;else if(ba<ja)ja=ba;if(U)zb[N.type][ka]={total:ba,cum:ba}}});if(/(area|column|bar)/.test(N.type)&&!na)if(ja>=0){ja=0;cd=true}else if(pa<0){pa=0;dd=true}}}})}function T(w,L,N){var U=1,ca=0;if(N){U*=-1;ca=lb}if(Zb){U*=-1;ca-=U*lb}if(qa===m)w=null;else if(L){if(Zb)w=lb-w;w=w/Db+qa}else w=U*(w-qa)*Db+ca;return w}function la(w,L,N){if(N){var U,ca,ba;U=T(w);var ka;w=ca=U+$b;U=ba=eb-U-$b;if(Aa){U=Ja;ba=eb-ac;if(w<Ca||
w>Ca+Xa)ka=true}else{w=Ca;ca=sb-Ic;if(U<Ja||U>Ja+Sa)ka=true}ka||ta.path(ta.crispLine([cb,w,U,db,ca,ba],N)).attr({stroke:L,"stroke-width":N}).add(ua)}}function ma(w,L,N){w=Ib(w,qa);L=Rb(L,Ba);la(w+(L-w)/2,N,(L-w)*Db)}function fa(w,L,N,U,ca,ba,ka){var Ia,Ob,Fa,tb=s.labels;if(L=="inside")ca=-ca;if(Pa)ca=-ca;L=Ob=T(w+bc)+$b;Ia=Fa=eb-T(w+bc)-$b;if(Aa){Ia=eb-ac-(Pa?Sa:0)+ub;Fa=Ia+ca}else{L=Ca+(Pa?Xa:0)+ub;Ob=L-ca}U&&ta.path(ta.crispLine([cb,L,Ia,db,Ob,Fa],U)).attr({stroke:N,"stroke-width":U}).add(K);if(ba&&
tb.enabled)if((w=md.call({index:ka,isFirst:w==Ha[0],isLast:w==Ha[Ha.length-1],dateTimeLabelFormat:xc,value:mb&&mb[w]?mb[w]:w}))||w===0){L=L+tb.x-(bc&&Aa?bc*Db*(Zb?-1:1):0);Ia=Ia+tb.y-(bc&&!Aa?bc*Db*(Zb?1:-1):0);ta.text(w,L,Ia,tb.style,tb.rotation,tb.align).add(K)}}function Na(w,L){var N;Sb=L?1:za.pow(10,Oa(za.log(w)/za.LN10));N=w/Sb;if(!L){L=[1,2,2.5,5,10];if(s.allowDecimals===false)if(Sb==1)L=[1,2,5,10];else if(Sb<=0.1)L=[1/Sb]}for(var U=0;U<L.length;U++){w=L[U];if(N<=(L[U]+(L[U+1]||L[U]))/2)break}w*=
Sb;return w}function Wa(){Ha=[];var w,L=Ra.global.useUTC,N=1E3/kb,U=6E4/kb,ca=36E5/kb,ba=864E5/kb,ka=6048E5/kb,Ia=2592E6/kb,Ob=31556952E3/kb,Fa=[["second",N,[1,2,5,10,15,30]],["minute",U,[1,2,5,10,15,30]],["hour",ca,[1,2,3,4,6,8,12]],["day",ba,[1,2]],["week",ka,[1,2]],["month",Ia,[1,2,3,4,6]],["year",Ob,null]],tb=Fa[6],Ka=tb[1],Da=tb[2];for(w=0;w<Fa.length;w++){tb=Fa[w];Ka=tb[1];Da=tb[2];if(Fa[w+1])if(nb<=(Ka*Da[Da.length-1]+Fa[w+1][1])/2)break}if(Ka==Ob&&nb<5*Ka)Da=[1,2,5];Fa=Na(nb/Ka,Da);var Tb;
Da=new Date(qa*kb);Da.setMilliseconds(0);if(Ka>=N)Da.setSeconds(Ka>=U?0:Fa*Oa(Da.getSeconds()/Fa));if(Ka>=U)Da[Zc](Ka>=ca?0:Fa*Oa(Da[Ec]()/Fa));if(Ka>=ca)Da[$c](Ka>=ba?0:Fa*Oa(Da[Fc]()/Fa));if(Ka>=ba)Da[Hc](Ka>=Ia?1:Fa*Oa(Da[lc]()/Fa));if(Ka>=Ia){Da[ad](Ka>=Ob?0:Fa*Oa(Da[uc]()/Fa));Tb=Da[vc]()}if(Ka>=Ob){Tb-=Tb%Fa;Da[bd](Tb)}Ka==ka&&Da[Hc](Da[lc]()-Da[Gc]()+s.startOfWeek);w=1;Tb=Da[vc]();N=Da.getTime()/kb;U=Da[uc]();for(ca=Da[lc]();N<Ba&&w<Xa;){Ha.push(N);if(Ka==Ob)N=tc(Tb+w*Fa,0)/kb;else if(Ka==
Ia)N=tc(Tb,U+w*Fa)/kb;else if(!L&&(Ka==ba||Ka==ka))N=tc(Tb,U,ca+w*Fa*(Ka==ba?1:7));else N+=Ka*Fa;w++}Ha.push(N);xc=s.dateTimeLabelFormats[tb[0]]}function La(w){var L=(Sb<1?ea(1/Sb):1)*10;return ea(w*L)/L}function fb(){var w;w=Oa(qa/nb)*nb;var L=kc(Ba/nb)*nb;Ha=[];for(w=La(w);w<=L;){Ha.push(w);w=La(w+nb)}if(mb){qa-=0.5;Ba+=0.5}}function Ya(){Eb?Wa():fb();var w=Ha[0],L=Ha[Ha.length-1];if(s.startOnTick)qa=w;else qa>w&&Ha.shift();if(s.endOnTick)Ba=L;else Ba<L&&Ha.pop()}function Za(){if(!Eb&&!mb){var w=
hc,L=Ha.length;hc=ic[Kb];if(L<hc){for(;Ha.length<hc;)Ha.push(La(Ha[Ha.length-1]+nb));Db*=(L-1)/(hc-1)}if(v(w)&&hc!=w)ya.isDirty=true}}function Ab(){var w,L,N,U=qa,ca=Ba;w=s.maxZoom;var ba;P();qa=h(ob,s.min,ja);Ba=h(mc,s.max,pa);if(Jc){ba=F[na?"xAxis":"yAxis"][s.linkedTo];ba=ba.getExtremes();qa=h(ba.min,ba.dataMin);Ba=h(ba.max,ba.dataMax)}if(Ba-qa<w){ba=(w-Ba+qa)/2;qa=Ib(qa-ba,h(s.min,qa-ba));Ba=Rb(qa+w,h(s.max,qa+w))}if(!mb&&!wc&&!Jc&&v(qa)&&v(Ba)){w=Ba-qa||1;if(!v(s.min)&&!v(ob)&&ed&&(ja<0||!cd))qa-=
w*ed;if(!v(s.max)&&!v(mc)&&fd&&(pa>0||!dd))Ba+=w*fd}nb=mb||qa==Ba?1:h(s.tickInterval,(Ba-qa)*s.tickPixelInterval/lb);if(!Eb&&!v(s.tickInterval))nb=Na(nb);Kc=s.minorTickInterval==="auto"&&nb?nb/5:s.minorTickInterval;Ya();Db=lb/(Ba-qa||1);ic||(ic={x:0,y:0});if(!Eb&&Ha.length>ic[Kb])ic[Kb]=Ha.length;if(!na)for(L in zb)for(N in zb[L])zb[L][N].cum=zb[L][N].total;if(!ya.isDirty)ya.isDirty=qa!=U||Ba!=ca}function gb(w,L,N){N=h(N,true);$a(ya,"setExtremes",{min:w,max:L},function(){if(mb){if(w<0)w=0;if(L>mb.length-
1)L=mb.length-1}ob=w;mc=L;N&&F.redraw()})}function vb(){return{min:qa,max:Ba,dataMin:ja,dataMax:pa}}function Pb(w){if(qa>w)w=qa;else if(Ba<w)w=Ba;return T(w,0,1)}function Ea(w){var L=w.width;(L?Lc:Mc).push(w);L?la(w.value,w.color,w.width):ma(w.from,w.to,w.color)}function M(){var w=s.title,L=s.alternateGridColor,N=s.minorTickWidth,U=s.lineWidth,ca,ba;ca=xa.length&&v(qa)&&v(Ba);if(K){K.empty();ua.empty()}else{K=ta.g("axis").attr({zIndex:7}).add();ua=ta.g("grid").attr({zIndex:1}).add()}if(ca||Jc){L&&
J(Ha,function(ka,Ia){if(Ia%2===0&&ka<Ba)ma(ka,Ha[Ia+1]!==m?Ha[Ia+1]:Ba,L)});J(Mc,function(ka){ma(ka.from,ka.to,ka.color)});if(Kc&&!mb)for(ca=qa;ca<=Ba;ca+=Kc){la(ca,s.minorGridLineColor,s.minorGridLineWidth);N&&fa(ca,s.minorTickPosition,s.minorTickColor,N,s.minorTickLength)}J(Ha,function(ka,Ia){ba=ka+bc;la(ba,s.gridLineColor,s.gridLineWidth);fa(ka,s.tickPosition,s.tickColor,s.tickWidth,s.tickLength,!(ka==qa&&!s.showFirstLabel||ka==Ba&&!s.showLastLabel),Ia)});J(Lc,function(ka){la(ka.value,ka.color,
ka.width)})}if(!ya.hasRenderedLine&&U){N=Ca+(Pa?Xa:0)+ub;ca=eb-ac-(Pa?Sa:0)+ub;ta.path(ta.crispLine([cb,Aa?Ca:N,Aa?ca:Ja,db,Aa?sb-Ic:N,Aa?ca:eb-ac],U)).attr({stroke:s.lineColor,"stroke-width":U,zIndex:7}).add();ya.hasRenderedLine=true}if(!ya.hasRenderedTitle&&!ya.axisTitle&&w&&w.text){U=Aa?Ca:Ja;U={low:U+(Aa?0:lb),middle:U+lb/2,high:U+(Aa?lb:0)}[w.align];N=(Aa?Ja+Sa:Ca)+(Aa?1:-1)*(Pa?-1:1)*w.margin-(Ga?parseInt(w.style.fontSize||12,10)/3:0);ya.axisTitle=ta.text(w.text,(Aa?U:N+(Pa?Xa:0)+ub)+(w.x||
0),(Aa?N-(Pa?Sa:0)+ub:U)+(w.y||0),w.style,w.rotation||0,{low:"left",middle:"center",high:"right"}[w.align]).attr({zIndex:7}).add();ya.hasRenderedTitle=true}ya.isDirty=false}function Q(w){J([Mc,Lc],function(L){for(var N=0;N<L.length;N++)if(L[N].id==w){L.splice(N,1);break}});M()}function da(){jc.resetTracker&&jc.resetTracker();M();J(xa,function(w){w.isDirty=true})}function wa(w,L){ya.categories=mb=w;J(xa,function(N){N.translate();N.setTooltipPoints(true)});ya.isDirty=true;h(L,true)&&da()}var na=s.isX,
Pa=s.opposite,Aa=Qa?!na:na,zb={bar:{},column:{},area:{},areaspline:{},line:{}};s=Ma(na?yc:Nc,Aa?Pa?nd:gd:Pa?od:pd,s);var ya=this,Eb=s.type=="datetime",ub=s.offset||0,Kb=na?"x":"y",lb=Aa?Xa:Sa,Db,$b=Aa?Ca:ac,K,ua,ja,pa,xa,ob,mc,Ba=null,qa=null,ed=s.minPadding,fd=s.maxPadding,Jc=v(s.linkedTo),cd,dd,wc,hd=s.events,Oc,Mc=s.plotBands||[],Lc=s.plotLines||[],nb,Kc,Sb,Ha,hc,xc,md=s.labels.formatter||function(){var w=this.value;return xc?Yb(xc,w):w},mb=s.categories||na&&F.columnCount,Zb=s.reversed,bc=mb&&
s.tickmarkPlacement=="between"?0.5:0;if(Qa&&na&&Zb===m)Zb=true;Pa||(ub*=-1);if(Aa)ub*=-1;o(ya,{addPlotBand:Ea,addPlotLine:Ea,adjustTickAmount:Za,categories:mb,getExtremes:vb,getThreshold:Pb,isXAxis:na,options:s,render:M,setExtremes:gb,setScale:Ab,setCategories:wa,translate:T,redraw:da,removePlotBand:Q,removePlotLine:Q,reversed:Zb,stacks:zb});for(Oc in hd)Fb(ya,Oc,hd[Oc]);Ab()}function d(){function F(T,la,ma,fa){if(!P[T]){la=ta.text(la,Ca+Xa-20,Ja+30,a.toolbar.itemStyle,0,"right").on("click",fa).attr({zIndex:20}).add();
P[T]=la}}function s(T){g(P[T].element);P[T]=null}var P={};return{add:F,remove:s}}function e(F){function s(Ea,M){Za=La?Ea:(2*Za+Ea)/3;Ab=La?M:(Ab+M)/2;gb.translate(Za,Ab);Pc=ia(Ea-Za)>1||ia(M-Ab)>1?function(){s(Ea,M)}:null}function P(){La=true;gb.hide()}function T(Ea){var M=Ea.series,Q=F.borderColor||Ea.color||M.color||"#606060",da,wa;wa=Ea.tooltipText;da=Ea.tooltipPos;la=M;M=ea(da?da[0]:Qa?Xa-Ea.plotY:Ea.plotX);Ea=ea(da?da[1]:Qa?Sa-Ea.plotX:Ea.plotY);da=nc(M,Ea);if(wa===false||!da)P();else{if(La){gb.show();
La=false}Pb.attr({text:wa});wa=Pb.getBBox();fb=wa.width;Ya=wa.height;vb.attr({width:fb+2*Na,height:Ya+2*Na,stroke:Q});Q=M-fb+Ca-25;M=Ea-Ya+Ja+10;if(Q<7){Q=7;M-=20}if(M<5)M=5;else if(M+Ya>eb)M=eb-Ya-5;s(ea(Q-Wa),ea(M-Wa))}}var la,ma=F.borderWidth,fa=F.style,Na=parseInt(fa.padding,10),Wa=ma+Na,La=true,fb,Ya,Za=0,Ab=0;fa.padding=0;var gb=ta.g("tooltip").attr({zIndex:8}).add(),vb=ta.rect(Wa,Wa,0,0,F.borderRadius,ma).attr({fill:F.backgroundColor,"stroke-width":ma}).add(gb).shadow(F.shadow),Pb=ta.text("",
Na+Wa,parseInt(fa.fontSize,10)+Na+Wa).attr({zIndex:1}).css(fa).add(gb);return{refresh:T,hide:P}}function f(F,s){function P(M){M=M||V.event;if(!M.target)M.target=M.srcElement;if(M.type!="mousemove"||V.opera)oc=t(ab);if(Ga){M.chartX=M.x;M.chartY=M.y}else if(M.layerX===m){M.chartX=M.pageX-oc.x;M.chartY=M.pageY-oc.y}else{M.chartX=M.layerX;M.chartY=M.layerY}return M}function T(M){var Q={xAxis:[],yAxis:[]};J(pb,function(da){var wa=da.translate,na=da.isXAxis;Q[na?"xAxis":"yAxis"].push({axis:da,value:wa((Qa?
!na:na)?M.chartX-Ca:Sa-M.chartY+Ja,true)})});return Q}function la(M){var Q=F.hoverPoint,da=F.hoverSeries;if(da&&da.tracker)(M=da.tooltipPoints[Qa?M.chartY:M.chartX-Ca])&&M!=Q&&M.onMouseOver()}function ma(){var M=F.hoverSeries,Q=F.hoverPoint;Q&&Q.onMouseOut();M&&M.onMouseOut();Qc&&Qc.hide()}function fa(){if(Za){var M={xAxis:[],yAxis:[]},Q=Za.getBBox(),da=Q.x-Ca,wa=Q.y-Ja;if(Ya){J(pb,function(na){var Pa=na.translate,Aa=na.isXAxis,zb=Qa?!Aa:Aa,ya=Pa(zb?da:Sa-wa-Q.height,true);Pa=Pa(zb?da+Q.width:Sa-
wa,true);M[Aa?"xAxis":"yAxis"].push({axis:na,min:Rb(ya,Pa),max:Ib(ya,Pa)})});$a(F,"selection",M,Rc)}Za=Za.destroy()}F.mouseIsDown=Sc=Ya=false}function Na(){var M=true;ab.onmousedown=function(Q){Q=P(Q);Q.preventDefault&&Q.preventDefault();F.mouseIsDown=Sc=true;La=Q.chartX;fb=Q.chartY;if(zc&&(gb||vb))Za||(Za=ta.rect(Ca,Ja,Pb?1:Xa,Ea?1:Sa,0).attr({fill:"rgba(69,114,167,0.25)",zIndex:7}).add())};ab.onmousemove=function(Q){Q=P(Q);Q.returnValue=false;var da=Q.chartX,wa=Q.chartY,na=!nc(da-Ca,wa-Ja);if(Sc){Ya=
Math.sqrt(Math.pow(La-da,2)+Math.pow(fb-wa,2))>10;if(Pb){Q=da-La;Za.attr({width:ia(Q),x:(Q>0?0:Q)+La})}if(Ea){wa-=fb;Za.attr({height:ia(wa),y:(wa>0?0:wa)+fb})}}else na||la(Q);if(na&&!M){ma();fa()}M=na;return false};ab.onmouseup=function(){fa()};ab.onclick=function(Q){var da=F.hoverPoint;Q=P(Q);Q.cancelBubble=true;if(!Ya)if(da&&D(Q.target,"isTracker")){var wa=da.plotX,na=da.plotY;o(da,{pageX:oc.x+Ca+(Qa?Xa-na:wa),pageY:oc.y+Ja+(Qa?Sa-wa:na)});$a(F.hoverSeries||da.series,"click",o(Q,{point:da}));da.firePointEvent("click",
Q)}else{o(Q,T(Q));nc(Q.chartX-Ca,Q.chartY-Ja)&&$a(F,"click",Q)}Ya=false}}function Wa(){F.trackerGroup=Tc=ta.g("tracker");Qa&&Tc.attr({width:F.plotWidth,height:F.plotHeight}).invert();Tc.attr({zIndex:9}).translate(Ca,Ja).add()}var La,fb,Ya,Za,Ab=sa.zoomType,gb=/x/.test(Ab),vb=/y/.test(Ab),Pb=gb&&!Qa||vb&&Qa,Ea=vb&&!Qa||gb&&Qa;Wa();if(s.enabled)F.tooltip=Qc=e(s);Na();id=setInterval(function(){Pc&&Pc()},32);o(this,{zoomX:gb,zoomY:vb,resetTracker:ma})}function j(F){var s=F.type||sa.defaultSeriesType,
P=Bb[s],T=R.hasRendered;if(T)if(Qa&&s=="column")P=Bb.bar;else if(!Qa&&s=="bar")P=Bb.column;s=new P;s.init(R,F);if(!T&&s.inverted)Qa=true;if(s.isCartesian)zc=s.isCartesian;Va.push(s);return s}function r(F,s){var P;s=h(s,true);$a(R,"addSeries",{options:F},function(){P=j(F);P.isDirty=true;R.isDirty=true;s&&R.redraw()});return P}function x(){sa.alignTicks!==false&&J(pb,function(F){F.adjustTickAmount()})}function E(){for(var F=R.isDirty,s,P=Va.length,T=P,la;T--;){la=Va[T];if(la.isDirty&&la.options.stacking){s=
true;break}}if(s)for(T=P;T--;){la=Va[T];if(la.options.stacking)la.isDirty=true}J(Va,function(ma){if(ma.isDirty){ma.cleanData();ma.getSegments();if(ma.options.legendType=="point")F=true}});ic=null;if(zc){J(pb,function(ma){ma.setScale()});x();J(pb,function(ma){ma.isDirty&&ma.redraw()})}J(Va,function(ma){ma.isDirty&&ma.visible&&ma.redraw()});if(F&&Uc.renderLegend){Uc.renderLegend();R.isDirty=false}jc&&jc.resetTracker&&jc.resetTracker();$a(R,"redraw")}function I(F){var s=a.loading;if(!Ub){Ub=i(u,{className:"highcharts-loading"},
o(s.style,{left:Ca+va,top:Ja+va,width:Xa+va,height:Sa+va,zIndex:10,display:ra}),ab);i("span",null,s.labelStyle,Ub)}if(!Vc){p(Ub,{opacity:0,display:""});Ub.getElementsByTagName("span")[0].innerHTML=F||a.lang.loading;pc(Ub,{opacity:s.style.opacity},{duration:s.showDuration});Vc=true}}function Y(){pc(Ub,{opacity:0},{duration:a.loading.hideDuration,complete:function(){p(Ub,{display:ra})}});Vc=false}function Z(F){var s,P,T;for(s=0;s<pb.length;s++)if(pb[s].options.id==F)return pb[s];for(s=0;s<Va.length;s++)if(Va[s].options.id==
F)return Va[s];for(s=0;s<Va.length;s++){T=Va[s].data;for(P=0;P<T.length;P++)if(T[P].id==F)return T[P]}return null}function ha(){var F=a.xAxis||{},s=a.yAxis||{},P;F=n(F);J(F,function(T,la){T.index=la;T.isX=true});s=n(s);J(s,function(T,la){T.index=la});pb=F.concat(s);R.xAxis=[];R.yAxis=[];pb=cc(pb,function(T){P=new c(R,T);R[P.isXAxis?"xAxis":"yAxis"].push(P);return P});x()}function Ta(){var F=[];J(Va,function(s){F=F.concat(Ac(s.data,function(P){return P.selected}))});return F}function W(){return Ac(Va,
function(F){return F.selected})}function hb(){var F=a.title,s=F.align,P=a.subtitle,T=P.align,la={left:0,center:sb/2,right:sb};F&&F.text&&ta.text(F.text,la[s]+F.x,F.y,F.style,0,s).attr({"class":"highcharts-title"}).add();P&&P.text&&ta.text(P.text,la[T]+P.x,P.y,P.style,0,T).attr({"class":"highcharts-subtitle"}).add()}function qb(){Gb=sa.renderTo;jd=oa+Xb++;if(typeof Gb=="string")Gb=O.getElementById(Gb);Gb.innerHTML="";if(!Gb.offsetWidth){Vb=Gb.cloneNode(0);p(Vb,{position:C,top:"-9999px",display:""});
O.body.appendChild(Vb)}var F=(Vb||Gb).offsetHeight;R.chartWidth=sb=sa.width||(Vb||Gb).offsetWidth||600;R.chartHeight=eb=sa.height||(F>Ja+ac?F:0)||400;R.plotWidth=Xa=sb-Ca-Ic;R.plotHeight=Sa=eb-Ja-ac;R.plotLeft=Ca;R.plotTop=Ja;R.container=ab=i(u,{className:"highcharts-container"+(sa.className?" "+sa.className:""),id:jd},o({position:X,overflow:ga,width:sb+va,height:eb+va,textAlign:"left"},sa.style),Vb||Gb);R.renderer=ta=sa.renderer=="SVG"?new qc(ab,sb,eb):new kd(ab,sb,eb)}function Qb(){var F,s=a.labels,
P=a.credits,T=sa.borderWidth||0,la=sa.backgroundColor,ma=sa.plotBackgroundColor,fa=sa.plotBackgroundImage;F=2*T+(sa.shadow?8:0);if(T||la)ta.rect(F/2,F/2,sb-F,eb-F,sa.borderRadius,T).attr({stroke:sa.borderColor,"stroke-width":T,fill:la||ra}).add().shadow(sa.shadow);ma&&ta.rect(Ca,Ja,Xa,Sa,0).attr({fill:ma}).add().shadow(sa.plotShadow);fa&&ta.image(fa,Ca,Ja,Xa,Sa).add();sa.plotBorderWidth&&ta.rect(Ca,Ja,Xa,Sa,0,sa.plotBorderWidth).attr({stroke:sa.plotBorderColor,"stroke-width":sa.plotBorderWidth,zIndex:4}).add();
zc&&J(pb,function(Na){Na.render()});hb();s.items&&J(s.items,function(){var Na=o(s.style,this.style),Wa=parseInt(Na.left,10)+Ca,La=parseInt(Na.top,10)+Ja+12;delete Na.left;delete Na.top;ta.text(this.html,Wa,La,Na).attr({zIndex:2}).add()});J(Va,function(Na){Na.render()});Uc=R.legend=new qd(R);if(!R.toolbar)R.toolbar=d(R);P.enabled&&!R.credits&&ta.text(P.text,sb-10,eb-5,P.style,0,"right").on("click",function(){location.href=P.href}).attr({zIndex:8}).add();R.hasRendered=true;if(Vb){Gb.appendChild(ab);
g(Vb)}}function Cb(){var F=Va.length;dc(V,"unload",Cb);dc(R);for(J(pb,function(s){dc(s)});F--;)Va[F].destroy();ab.onmousedown=ab.onmousemove=ab.onmouseup=ab.onclick=null;ab.parentNode.removeChild(ab);ab=null;clearInterval(id);for(F in R)delete R[F]}function wb(){if(!Hb&&O.readyState!="complete")O.attachEvent("onreadystatechange",function(){O.detachEvent("onreadystatechange",arguments.callee);wb()});else{qb();J(a.series||[],function(F){j(F)});R.inverted=Qa=h(Qa,a.chart.inverted);R.plotSizeX=rd=Qa?
Sa:Xa;R.plotSizeY=sd=Qa?Xa:Sa;R.tracker=jc=new f(R,a.tooltip);ha();J(Va,function(F){F.translate();F.setTooltipPoints()});R.render=Qb;Qb();$a(R,"load");b&&b(R)}}yc=Ma(yc,Ra.xAxis);Nc=Ma(Nc,Ra.yAxis);Ra.xAxis=Ra.yAxis=null;a=Ma(Ra,a);var sa=a.chart,ib=sa.margin;ib=typeof ib=="number"?[ib,ib,ib,ib]:ib;var Ja=h(sa.marginTop,ib[0]),Ic=h(sa.marginRight,ib[1]),ac=h(sa.marginBottom,ib[2]),Ca=h(sa.marginLeft,ib[3]),Gb,Vb,ab,jd,sb,eb,R=this;ib=sa.events;var Wc,Xc,nc,Qc,Sc,Ub,Vc,Sa,Xa,rd,sd,jc,Tc,Uc,oc,zc=sa.showAxes,
pb=[],ic,Va=[],Qa,ta,Pc,id,Rc,ld,qd=function(F){function s(K,ua){var ja=K.legendItem,pa=K.legendLine,xa=K.legendSymbol,ob=gb.color,mc=ua?fa.itemStyle.color:ob;K=ua?K.color:ob;ja&&ja.css({color:mc});pa&&pa.attr({stroke:K});xa&&xa.attr({stroke:K,fill:K})}function P(K,ua,ja){var pa=K.legendItem,xa=K.legendLine,ob=K.legendSymbol;K=K.checkbox;pa&&pa.attr({x:ua,y:ja});xa&&xa.translate(ua,ja-4);ob&&ob.translate(ua,ja);if(K){K.x=ua;K.y=ja}}function T(K){for(var ua=fb.length,ja=K.checkbox;ua--;)if(fb[ua]==
K){fb.splice(ua,1);break}J(["legendItem","legendLine","legendSymbol"],function(pa){K[pa]&&K[pa].destroy()});ja&&g(K.checkbox)}function la(K){var ua,ja,pa=K.legendItem;ja=K.series||K;if(!pa){ja=/^(bar|pie|area|column)$/.test(ja.type);K.legendItem=pa=ta.text(fa.labelFormatter.call(K),0,0).css(K.visible?Za:gb).on("mouseover",function(){K.setState(Lb);pa.css(Ab)}).on("mouseout",function(){pa.css(K.visible?Za:gb);K.setState()}).on("click",function(){var xa=function(){K.setVisible()};K.firePointEvent?K.firePointEvent("legendItemClick",
null,xa):$a(K,"legendItemClick",null,xa)}).attr({zIndex:2}).add(ya);if(!ja&&K.options&&K.options.lineWidth)K.legendLine=ta.path([cb,-Wa-La,0,db,-La,0]).attr({"stroke-width":K.options.lineWidth,zIndex:2}).add(ya);if(ja)ua=ta.rect(-Wa-La,-11,Wa,12,2).attr({"stroke-width":0,zIndex:3}).add(ya);else if(K.options&&K.options.marker&&K.options.marker.enabled)ua=ta.symbol(K.symbol,-Wa/2-La,-4,K.options.marker.radius).attr(K.pointAttr[jb]).attr({zIndex:3}).add(ya);K.legendSymbol=ua;s(K,K.visible);if(K.options&&
K.options.showCheckbox){K.checkbox=i("input",{type:"checkbox",checked:K.selected,defaultChecked:K.selected},fa.itemCheckboxStyle,ab);Fb(K.checkbox,"click",function(xa){xa=xa.target;$a(K,"checkboxClick",{checked:xa.checked},function(){K.select()})})}}P(K,da,wa);ua=pa.getBBox();na=wa;K.legendItemWidth=ua=fa.itemWidth||Wa+La+ua.width+Pb;if(Na){da+=ua;Eb=ub||Ib(da-Q,Eb);if(da-Q+ua>(ub||sb-2*vb-Q)){da=Q;wa+=Ea}}else{wa+=Ea;Eb=ub||Ib(ua,Eb)}fb.push(K)}function ma(){da=Q;wa=M;na=Eb=0;ya||(ya=ta.g("legend").attr({zIndex:7}).add());
$b&&Db.reverse();J(Db,function(xa){if(xa.options.showInLegend){xa=xa.options.legendType=="point"?xa.data:[xa];J(xa,la)}});$b&&Db.reverse();Kb=ub||Eb;lb=na-M+Ea;if(Aa||zb){Kb+=2*vb;lb+=2*vb;if(Pa)Pa.attr({height:lb,width:Kb});else Pa=ta.rect(0,0,Kb,lb,fa.borderRadius,Aa||0).attr({stroke:fa.borderColor,"stroke-width":Aa||0,fill:zb||ra}).add(ya).shadow(fa.shadow)}for(var K=["left","right","top","bottom"],ua,ja=4;ja--;){ua=K[ja];if(Ya[ua]&&Ya[ua]!="auto"){fa[ja<2?"align":"verticalAlign"]=ua;fa[ja<2?"x":
"y"]=parseInt(Ya[ua],10)*(ja%2?-1:1)}}var pa=Xc(o({width:Kb,height:lb},fa));ya.translate(pa.x,pa.y);J(fb,function(xa){var ob=xa.checkbox;ob&&p(ob,{left:pa.x+xa.legendItemWidth+ob.x-40+va,top:pa.y+ob.y-11+va})})}var fa=F.options.legend;if(fa.enabled){var Na=fa.layout=="horizontal",Wa=fa.symbolWidth,La=fa.symbolPadding,fb=[],Ya=fa.style,Za=fa.itemStyle,Ab=fa.itemHoverStyle,gb=fa.itemHiddenStyle,vb=parseInt(Ya.padding,10),Pb=20,Ea=fa.lineHeight||16,M=18,Q=4+vb+Wa+La,da,wa,na,Pa,Aa=fa.borderWidth,zb=
fa.backgroundColor,ya,Eb,ub=fa.width,Kb,lb,Db=F.series,$b=fa.reversed;ma();return{colorizeItem:s,destroyItem:T,renderLegend:ma}}};nc=function(F,s){return F>=0&&F<=0+Xa&&s>=0&&s<=0+Sa};ld=function(){$a(R,"selection",{resetSelection:true},Rc);R.toolbar.remove("zoom")};Rc=function(F){var s=Ra.lang;R.toolbar.add("zoom",s.resetZoom,s.resetZoomTitle,ld);!F||F.resetSelection?J(pb,function(P){P.setExtremes(null,null,false)}):J(F.xAxis.concat(F.yAxis),function(P){var T=P.axis;if(R.tracker[T.isXAxis?"zoomX":
"zoomY"])T.setExtremes(P.min,P.max,false)});E()};Xc=function(F){var s=F.align,P=F.verticalAlign,T=F.x||0,la=F.y||0,ma={x:T||0,y:la||0};if(/^(right|center)$/.test(s))ma.x=(sb-F.width)/{right:1,center:2}[s]+T;if(/^(bottom|middle)$/.test(P))ma.y=(eb-F.height)/{bottom:1,middle:2}[P]+la;return ma};Wb=yb=0;Fb(V,"unload",Cb);if(ib)for(Wc in ib)Fb(R,Wc,ib[Wc]);R.options=a;R.series=Va;R.addSeries=r;R.destroy=Cb;R.get=Z;R.getAlignment=Xc;R.getSelectedPoints=Ta;R.getSelectedSeries=W;R.hideLoading=Y;R.isInsidePlot=
nc;R.redraw=E;R.showLoading=I;wb()}function aa(a){var b=[],c=[],d;for(d=0;d<a.length;d++){b[d]=a[d].plotX;c[d]=a[d].plotY}this.xdata=b;this.ydata=c;a=[];this.y2=[];var e=c.length;this.n=e;this.y2[0]=0;this.y2[e-1]=0;a[0]=0;for(d=1;d<e-1;d++){var f=b[d+1]-b[d-1];f=(b[d]-b[d-1])/f;var j=f*this.y2[d-1]+2;this.y2[d]=(f-1)/j;a[d]=(c[d+1]-c[d])/(b[d+1]-b[d])-(c[d]-c[d-1])/(b[d]-b[d-1]);a[d]=(6*a[d]/(b[d+1]-b[d-1])-f*a[d-1])/j}for(b=e-2;b>=0;b--)this.y2[b]=this.y2[b]*this.y2[b+1]+a[b]}var O=document,V=window,
za=Math,ea=za.round,Oa=za.floor,kc=za.ceil,Ib=za.max,Rb=za.min,ia=za.abs,Nb=za.cos,Jb=za.sin,S=navigator.userAgent,Ga=/msie/i.test(S)&&!V.opera,Mb=/AppleWebKit/.test(S),Hb=V.SVGAngle||O.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),yb,Wb,sc={},Xb=0,kb=1,fc,Ra,Yb,m,u="div",C="absolute",X="relative",ga="hidden",oa="highcharts-",va="px",ra="none",cb="M",db="L",gc="rgba(192,192,192,"+(Hb?1.0E-6:0.0020)+")",jb="",Lb="hover",tc,Ec,Fc,Gc,lc,uc,vc,Zc,$c,Hc,ad,bd,bb=
V.HighchartsAdapter,Ua=bb||{},J=Ua.each,Ac=Ua.grep,cc=Ua.map,Ma=Ua.merge,Dc=Ua.hyphenate,Fb=Ua.addEvent,dc=Ua.removeEvent,$a=Ua.fireEvent,pc=Ua.animate,Bc=Ua.stop;Ua=Ua.getAjax;var Bb={};if(!bb&&V.jQuery){var xb=jQuery;J=function(a,b){for(var c=0,d=a.length;c<d;c++)if(b.call(a[c],a[c],c,a)===false)return c};Ac=xb.grep;cc=function(a,b){for(var c=[],d=0,e=a.length;d<e;d++)c[d]=b.call(a[d],a[d],d,a);return c};Ma=function(){var a=arguments;return xb.extend(true,null,a[0],a[1],a[2],a[3])};Dc=function(a){return a.replace(/([A-Z])/g,
function(b,c){return"-"+c.toLowerCase()})};Fb=function(a,b,c){xb(a).bind(b,c)};dc=function(a,b,c){var d=O.removeEventListener?"removeEventListener":"detachEvent";if(O[d]&&!a[d])a[d]=function(){};xb(a).unbind(b,c)};$a=function(a,b,c,d){var e=xb.Event(b),f="detached"+b;o(e,c);if(a[b]){a[f]=a[b];a[b]=null}xb(a).trigger(e);if(a[f]){a[b]=a[f];a[f]=null}d&&!e.isDefaultPrevented()&&d(e)};pc=function(a,b,c){a=xb(a);a.stop();a.animate(b,c)};Bc=function(a){xb(a).stop()};Ua=function(a,b){xb.get(a,null,b)};xb.extend(xb.easing,
{easeOutQuad:function(a,b,c,d,e){return-d*(b/=e)*(b-2)+c}});var td=jQuery.fx.step._default,ud=jQuery.fx.prototype.cur;xb.fx.step._default=function(a){var b=a.elem;b.attr?b.attr(a.prop,a.now):td.apply(this,arguments)};xb.fx.prototype.cur=function(){var a=this.elem;return a.attr?a.attr(this.prop):ud.apply(this,arguments)}}else if(!bb&&V.MooTools){J=$each;cc=function(a,b){return a.map(b)};Ac=function(a,b){return a.filter(b)};Ma=$merge;Dc=function(a){return a.hyphenate()};Fb=function(a,b,c){if(typeof b==
"string"){if(b=="unload")b="beforeunload";if(!a.addEvent)if(a.nodeName)a=$(a);else o(a,new Events);a.addEvent(b,c)}};dc=function(a,b,c){if(b){if(b=="unload")b="beforeunload";a.removeEvent(b,c)}};$a=function(a,b,c,d){b=new Event({type:b,target:a});b=o(b,c);b.preventDefault=function(){d=null};a.fireEvent&&a.fireEvent(b.type,b);d&&d(b)};pc=function(a,b,c){var d=a.attr;if(d&&!a.setStyle){a.setStyle=a.getStyle=a.attr;a.$family=a.uid=true}Bc(a);c=new Fx.Morph(d?a:$(a),o(c,{transition:Fx.Transitions.Quad.easeInOut}));
c.start(b);a.fx=c};Bc=function(a){a.fx&&a.fx.cancel()};Ua=function(a,b){(new Request({url:a,method:"get",onSuccess:b})).send()}}bb={enabled:true,align:"center",x:0,y:15,style:{color:"#666",fontSize:"11px"}};Ra={colors:["#4572A7","#AA4643","#89A54E","#80699B","#3D96AE","#DB843D","#92A8CD","#A47D7C","#B5CA92"],symbols:["circle","diamond","square","triangle","triangle-down"],lang:{loading:"Loading...",months:["January","February","March","April","May","June","July","August","September","October","November",
"December"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],decimalPoint:".",resetZoom:"Reset zoom",resetZoomTitle:"Reset zoom level 1:1",thousandsSep:","},global:{useUTC:true},chart:{margin:[50,50,90,80],borderColor:"#4572A7",borderRadius:5,defaultSeriesType:"line",ignoreHiddenSeries:true,style:{fontFamily:'"Lucida Grande", "Lucida Sans Unicode", Verdana, Arial, Helvetica, sans-serif',fontSize:"12px"},backgroundColor:"#FFFFFF",plotBorderColor:"#C0C0C0"},title:{text:"Chart title",
x:0,y:20,align:"center",style:{color:"#3E576F",fontSize:"16px"}},subtitle:{text:"",x:0,y:40,align:"center",style:{color:"#6D869F"}},plotOptions:{line:{allowPointSelect:false,showCheckbox:false,animation:true,events:{},lineWidth:2,shadow:true,marker:{enabled:true,lineWidth:0,radius:4,lineColor:"#FFFFFF",states:{hover:{},select:{fillColor:"#FFFFFF",lineColor:"#000000",lineWidth:2}}},point:{events:{}},dataLabels:Ma(bb,{enabled:false,y:-6,formatter:function(){return this.y}}),showInLegend:true,states:{hover:{lineWidth:3,
marker:{}},select:{marker:{}}},stickyTracking:true}},labels:{style:{position:C,color:"#3E576F"}},legend:{enabled:true,align:"center",layout:"horizontal",labelFormatter:function(){return this.name},borderWidth:1,borderColor:"#909090",borderRadius:5,shadow:false,style:{padding:"5px"},itemStyle:{cursor:"pointer",color:"#3E576F"},itemHoverStyle:{cursor:"pointer",color:"#000000"},itemHiddenStyle:{color:"#C0C0C0"},itemCheckboxStyle:{position:C,width:"13px",height:"13px"},symbolWidth:16,symbolPadding:5,
verticalAlign:"bottom",x:15,y:-15},loading:{hideDuration:100,labelStyle:{fontWeight:"bold",position:X,top:"1em"},showDuration:100,style:{position:C,backgroundColor:"white",opacity:0.5,textAlign:"center"}},tooltip:{enabled:true,formatter:function(){var a=this.series,b=a.xAxis,c=this.x;return"<b>"+(this.point.name||a.name)+"</b><br/>"+(v(c)?"X value: "+(b&&b.options.type=="datetime"?Yb(null,c):c)+"<br/>":"")+"Y value: "+this.y},backgroundColor:"rgba(255, 255, 255, .85)",borderWidth:2,borderRadius:5,
shadow:true,snap:10,style:{color:"#333333",fontSize:"12px",padding:"5px",whiteSpace:"nowrap"}},toolbar:{itemStyle:{color:"#4572A7",cursor:"pointer"}},credits:{enabled:true,text:"Highcharts.com",href:"http://www.highcharts.com",style:{cursor:"pointer",color:"#909090",fontSize:"10px"}}};var yc={dateTimeLabelFormats:{second:"%H:%M:%S",minute:"%H:%M",hour:"%H:%M",day:"%e. %b",week:"%e. %b",month:"%b '%y",year:"%Y"},endOnTick:false,gridLineColor:"#C0C0C0",labels:bb,lineColor:"#C0D0E0",lineWidth:1,max:null,
min:null,minPadding:0.01,maxPadding:0.01,maxZoom:null,minorGridLineColor:"#E0E0E0",minorGridLineWidth:1,minorTickColor:"#A0A0A0",minorTickLength:2,minorTickPosition:"outside",minorTickWidth:1,showFirstLabel:true,showLastLabel:false,startOfWeek:1,startOnTick:false,tickColor:"#C0D0E0",tickLength:5,tickmarkPlacement:"between",tickPixelInterval:100,tickPosition:"outside",tickWidth:1,title:{align:"middle",margin:35,style:{color:"#6D869F",fontWeight:"bold"}},type:"linear"},Nc=Ma(yc,{endOnTick:true,gridLineWidth:1,
tickPixelInterval:72,showLastLabel:true,labels:{align:"right",x:-8,y:3},lineWidth:0,maxPadding:0.05,minPadding:0.05,startOnTick:true,tickWidth:0,title:{margin:40,rotation:270,text:"Y-values"}}),pd={labels:{align:"right",x:-8,y:3},title:{rotation:270}},od={labels:{align:"left",x:8,y:3},title:{rotation:90}},gd={labels:{align:"center",x:0,y:14},title:{rotation:0}},nd=Ma(gd,{labels:{y:-5}});bb=Ra.plotOptions;Ua=bb.line;bb.spline=Ma(Ua);bb.scatter=Ma(Ua,{lineWidth:0,states:{hover:{lineWidth:0}}});bb.area=
Ma(Ua,{});bb.areaspline=Ma(bb.area);bb.column=Ma(Ua,{borderColor:"#FFFFFF",borderWidth:1,borderRadius:0,groupPadding:0.2,marker:null,pointPadding:0.1,minPointLength:0,states:{hover:{brightness:0.1,shadow:false},select:{color:"#C0C0C0",borderColor:"#000000",shadow:false}}});bb.bar=Ma(bb.column,{dataLabels:{align:"left",x:5,y:0}});bb.pie=Ma(Ua,{borderColor:"#FFFFFF",borderWidth:1,center:["50%","50%"],colorByPoint:true,legendType:"point",marker:null,size:"90%",slicedOffset:10,states:{hover:{brightness:0.1,
shadow:false}}});y();var ec=function(a){function b(r){if(j=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]?(?:\.[0-9]+)?)\s*\)/.exec(r))f=[parseInt(j[1],10),parseInt(j[2],10),parseInt(j[3],10),parseFloat(j[4],10)];else if(j=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(r))f=[parseInt(j[1],16),parseInt(j[2],16),parseInt(j[3],16),1]}function c(r){return f&&!isNaN(f[0])?r=="rgb"?"rgb("+f[0]+","+f[1]+","+f[2]+")":r=="a"?f[3]:"rgba("+f.join(",")+")":a}function d(r){if(typeof r==
"number"&&r!==0)for(var x=0;x<3;x++){f[x]+=parseInt(r*255,10);if(f[x]<0)f[x]=0;if(f[x]>255)f[x]=255}return this}function e(r){f[3]=r;return this}var f=[],j;b(a);return{get:c,brighten:d,setOpacity:e}};Yb=function(a,b,c){function d(Z){return Z.toString().replace(/^([0-9])$/,"0$1")}if(!v(b)||isNaN(b))return"Invalid date";a=h(a,"%Y-%m-%d %H:%M:%S");b=new Date(b*kb);var e=b[Fc](),f=b[Gc](),j=b[lc](),r=b[uc](),x=b[vc](),E=Ra.lang,I=E.weekdays;E=E.months;b={a:I[f].substr(0,3),A:I[f],d:d(j),e:j,b:E[r].substr(0,
3),B:E[r],m:d(r+1),y:x.toString().substr(2,2),Y:x,H:d(e),I:d(e%12||12),l:e%12||12,M:d(b[Ec]()),p:e<12?"AM":"PM",P:e<12?"am":"pm",S:d(b.getSeconds())};for(var Y in b)a=a.replace("%"+Y,b[Y]);return c?a.substr(0,1).toUpperCase()+a.substr(1):a};z.prototype={init:function(a,b){this.element=O.createElementNS("http://www.w3.org/2000/svg",b);this.renderer=a},animate:function(a,b){pc(this,a,b)},attr:function(a,b){var c,d,e,f=this.element,j=f.nodeName,r=this.renderer,x,E=this.shadows,I,Y=this;if(typeof a==
"string"&&v(b)){c=a;a={};a[c]=b}if(typeof a=="string"){c=a;if(j=="circle")c={x:"cx",y:"cy"}[c]||c;else if(c=="strokeWidth")c="stroke-width";Y=parseFloat(D(f,c)||this[c]||0)}else for(c in a){b=a[c];if(c=="d"){if(b&&b.join)b=b.join(" ");if(/(NaN|  |^$)/.test(b))b="M 0 0"}else if(c=="x"&&j=="text")for(d=0;d<f.childNodes.length;d++){e=f.childNodes[d];D(e,"x")==D(f,"x")&&D(e,"x",b)}else if(c=="fill")b=r.color(b,f,c);else if(j=="circle")c={x:"cx",y:"cy"}[c]||c;else if(c=="translateX"||c=="translateY"){this[c]=
b;this.updateTransform();x=true}else if(c=="stroke")b=r.color(b,f,c);else if(c=="isTracker")this[c]=b;if(c=="strokeWidth")c="stroke-width";if(Mb&&c=="stroke-width"&&b===0)b=1.0E-6;if(this.symbolName&&/^(x|y|r|start|end|innerR)/.test(c)){if(!I){this.symbolAttr(a);I=true}x=true}if(E&&/^(width|height|visibility|x|y|d)$/.test(c))for(d=E.length;d--;)D(E[d],c,b);if(c=="text")r.buildText(f,b);else x||D(f,c,b)}return Y},symbolAttr:function(a){this.x=h(a.x,this.x);this.y=parseFloat(h(a.y,this.y));this.r=h(a.r,
this.r);this.start=h(a.start,this.start);this.end=h(a.end,this.end);this.width=h(a.width,this.width);this.height=parseFloat(h(a.height,this.height));this.innerR=h(a.innerR,this.innerR);this.attr({d:this.renderer.symbols[this.symbolName](this.x,this.y,this.r,{start:this.start,end:this.end,width:this.width,height:this.height,innerR:this.innerR})})},clip:function(a){return this.attr("clip-path","url("+this.renderer.url+"#"+a.id+")")},css:function(a){if(a&&a.color)a.fill=a.color;a=o(this.styles,a);this.attr({style:k(a)});
this.styles=a;return this},on:function(a,b){this.element["on"+a]=b;return this},translate:function(a,b){this.translateX=a;this.translateY=b;this.updateTransform();return this},invert:function(){this.inverted=true;this.updateTransform();return this},updateTransform:function(){var a=this.translateX||0,b=this.translateY||0,c=this.inverted,d=[];if(c){a+=this.attr("width");b+=this.attr("height")}if(a||b)d.push("translate("+a+","+b+")");c&&d.push("rotate(90) scale(-1,1)");d.length&&D(this.element,"transform",
d.join(" "))},toFront:function(){var a=this.element;a.parentNode.appendChild(a);return this},getBBox:function(){return this.element.getBBox()},show:function(){return this.attr({visibility:"visible"})},hide:function(){return this.attr({visibility:ga})},add:function(a){var b=this.renderer,c=a||b;b=c.element||b.box;var d=b.childNodes,e=this.element,f=D(e,"zIndex"),j;this.parentInverted=a&&a.inverted;if(f){c.handleZ=true;f=parseInt(f,10)}if(c.handleZ)for(j=0;j<d.length;j++){a=d[j];c=D(a,"zIndex");if(a!=
e&&(parseInt(c,10)>f||!v(f)&&v(c))){b.insertBefore(e,a);return this}}b.appendChild(e);return this},destroy:function(){var a=this.element,b=this.shadows,c=a.parentNode,d;a.onclick=a.onmouseout=a.onmouseover=a.onmousemove=null;Bc(this);c&&c.removeChild(a);b&&J(b,function(e){(c=e.parentNode)&&c.removeChild(e)});for(d in this)delete this[d];return null},empty:function(){for(var a=this.element,b=a.childNodes,c=b.length;c--;)a.removeChild(b[c])},shadow:function(a){var b=[],c,d=this.element,e=this.parentInverted?
"(-1,-1)":"(1,1)";if(a){for(a=1;a<=3;a++){c=d.cloneNode(0);D(c,{isShadow:"true",stroke:"rgb(0, 0, 0)","stroke-opacity":0.05*a,"stroke-width":7-2*a,transform:"translate"+e,fill:ra});d.parentNode.insertBefore(c,d);b.push(c)}this.shadows=b}return this}};var qc=function(){this.init.apply(this,arguments)};qc.prototype={init:function(a,b,c){var d=O.createElementNS("http://www.w3.org/2000/svg","svg"),e=location;D(d,{width:b,height:c,xmlns:"http://www.w3.org/2000/svg",version:"1.1"});a.appendChild(d);this.Element=
z;this.box=d;this.url=Ga?"":e.href.replace(/#.*?$/,"");this.defs=this.createElement("defs").add()},createElement:function(a){var b=new this.Element;b.init(this,a);return b},buildText:function(a,b){b=b.toString().replace(/<(b|strong)>/g,'<span style="font-weight:bold">').replace(/<(i|em)>/g,'<span style="font-style:italic">').replace(/<a/g,"<span").replace(/<\/(b|strong|i|em|a)>/g,"</span>").split(/<br[^>]?>/g);for(var c=a.childNodes,d=/style="([^"]+)"/,e=/href="([^"]+)"/,f=D(a,"x"),j=c.length;j--;)a.removeChild(c[j]);
J(b,function(r,x){var E,I=0;r=r.replace(/<span/g,"|||<span").replace(/<\/span>/g,"</span>|||");E=r.split("|||");J(E,function(Y){if(Y!==""||E.length==1){var Z={},ha=O.createElementNS("http://www.w3.org/2000/svg","tspan");d.test(Y)&&D(ha,"style",Y.match(d)[1].replace(/(;| |^)color([ :])/,"$1fill$2"));if(e.test(Y)){D(ha,"onclick",'location.href="'+Y.match(e)[1]+'"');p(ha,{cursor:"pointer"})}Y=Y.replace(/<(.|\n)*?>/g,"");ha.appendChild(O.createTextNode(Y||" "));if(I)Z.dx=3;else Z.x=f;if(x&&!I)Z.dy=16;
D(ha,Z);a.appendChild(ha);I++}})})},crispLine:function(a,b){if(a[1]==a[4])a[1]=a[4]=ea(a[1])+b%2/2;if(a[2]==a[5])a[2]=a[5]=ea(a[2])+b%2/2;return a},path:function(a){return this.createElement("path").attr({d:a,fill:ra})},circle:function(a,b,c){a=typeof a=="object"?a:{x:a,y:b,r:c};return this.createElement("circle").attr(a)},arc:function(a,b,c,d,e,f){if(typeof a=="object"){b=a.y;c=a.r;d=a.innerR;e=a.start;f=a.end;a=a.x}return this.symbol("arc",a||0,b||0,c||0,{innerR:d||0,start:e||0,end:f||0})},rect:function(a,
b,c,d,e,f){if(arguments.length>1){var j=(f||0)%2/2;a=ea(a||0)+j;b=ea(b||0)+j;c=ea((c||0)-2*j);d=ea((d||0)-2*j)}j=typeof a=="object"?a:{x:a,y:b,width:Ib(c,0),height:Ib(d,0)};return this.createElement("rect").attr(o(j,{rx:e||j.r,ry:e||j.r,fill:ra}))},g:function(a){return this.createElement("g").attr(v(a)&&{"class":oa+a})},image:function(a,b,c,d,e){b=this.createElement("image").attr({x:b,y:c,width:d,height:e,preserveAspectRatio:ra});b.element.setAttributeNS("http://www.w3.org/1999/xlink","href",a);return b},
symbol:function(a,b,c,d,e){var f,j=this.symbols[a];j=j&&j(b,c,d,e);var r=/^url\((.*?)\)$/;if(j){f=this.path(j);o(f,{symbolName:a,x:b,y:c,r:d});e&&o(f,e)}else if(r.test(a)){a=a.match(r)[1];f=this.image(a).attr({visibility:ga});i("img",{onload:function(){var x=this;x=sc[x.src]||[x.width,x.height];f.attr({x:ea(b-x[0]/2)+va,y:ea(c-x[1]/2)+va,width:x[0],height:x[1],visibility:"inherit"})},src:a})}else f=this.circle(b,c,d);return f},symbols:{square:function(a,b,c){c=0.707*c;return[cb,a-c,b-c,db,a+c,b-c,
a+c,b+c,a-c,b+c,"Z"]},triangle:function(a,b,c){return[cb,a,b-1.33*c,db,a+c,b+0.67*c,a-c,b+0.67*c,"Z"]},"triangle-down":function(a,b,c){return[cb,a,b+1.33*c,db,a-c,b-0.67*c,a+c,b-0.67*c,"Z"]},diamond:function(a,b,c){return[cb,a,b-c,db,a+c,b,a,b+c,a-c,b,"Z"]},arc:function(a,b,c,d){var e=Math.PI,f=d.start,j=d.end-1.0E-6,r=d.innerR,x=Nb(f),E=Jb(f),I=Nb(j);j=Jb(j);d=d.end-f<e?0:1;return[cb,a+c*x,b+c*E,"A",c,c,0,d,1,a+c*I,b+c*j,db,a+r*I,b+r*j,"A",r,r,0,d,0,a+r*x,b+r*E,"Z"]}},clipRect:function(a,b,c,d){var e=
oa+Xb++,f=this.createElement("clipPath").attr({id:e}).add(this.defs);a=this.rect(a,b,c,d,0).add(f);a.id=e;return a},color:function(a,b,c){var d,e=/^rgba/;if(a&&a.linearGradient){var f=this;b="linearGradient";c=a[b];var j=oa+Xb++,r,x,E;r=f.createElement(b).attr({id:j,gradientUnits:"userSpaceOnUse",x1:c[0],y1:c[1],x2:c[2],y2:c[3]}).add(f.defs);J(a.stops,function(I){if(e.test(I[1])){d=ec(I[1]);x=d.get("rgb");E=d.get("a")}else{x=I[1];E=1}f.createElement("stop").attr({offset:I[0],"stop-color":x,"stop-opacity":E}).add(r)});
return"url("+this.url+"#"+j+")"}else if(e.test(a)){d=ec(a);D(b,c+"-opacity",d.get("a"));return d.get("rgb")}else return a},text:function(a,b,c,d,e,f){d=d||{};f=f||"left";e=e||0;var j=d.color||"#000000",r=Ra.chart.style;b=ea(h(b,0));c=ea(h(c,0));o(d,{fontFamily:d.fontFamily||r.fontFamily,fontSize:d.fontSize||r.fontSize});d=k(d);a={x:b,y:c,text:a,fill:j,style:d.replace(/"/g,"'")};if(e||f!="left")a=o(a,{"text-anchor":{left:"start",center:"middle",right:"end"}[f],transform:"rotate("+e+" "+b+" "+c+")"});
return this.createElement("text").attr(a)}};var Yc;if(!Hb){var vd=q(z,{init:function(a,b){var c=["<",b,' filled="f" stroked="f"'],d=["position: ",C,";"];if(b=="shape"||b==u)d.push("left:0;top:0;width:10px;height:10px");c.push(' style="',d.join(""),'"/>');if(b){c=b==u||b=="span"||b=="img"?c.join(""):a.prepVML(c);this.element=i(c)}this.renderer=a},add:function(a){var b=this.renderer,c=this.element,d=b.box;b=a&&a.inverted;a=a?a.element||a:d;if(b){b=a.style;p(c,{flip:"x",left:parseInt(b.width,10)-10,
top:parseInt(b.height,10)-10,rotation:-90})}a.appendChild(c);return this},attr:function(a,b){var c,d,e,f=this.element,j=f.style,r=f.nodeName,x=this.renderer,E=this.symbolName,I,Y=this.shadows,Z=O.documentMode,ha,Ta=this;if(typeof a=="string"&&v(b)){c=a;a={};a[c]=b}if(typeof a=="string"){c=a;Ta=c=="strokeWidth"||c=="stroke-width"?f.strokeweight:h(this[c],parseInt(j[{x:"left",y:"top"}[c]||c],10))}else for(c in a){d=a[c];ha=false;if(E&&/^(x|y|r|start|end|width|height|innerR)/.test(c)){if(!I){this.symbolAttr(a);
I=true}ha=true}else if(c=="d"){e=d.length;for(ha=[];e--;)ha[e]=typeof d[e]=="number"?ea(d[e]*10)-5:d[e]=="Z"?"x":d[e];d=ha.join(" ")||"x";f.path=d;if(Y)for(e=Y.length;e--;)Y[e].path=d;ha=true}else if(c=="zIndex"||c=="visibility"){j[c]=d;Z==8&&c=="visibility"&&r=="DIV"&&J(f.childNodes,function(W){p(W,{visibility:d})});ha=true}else if(/^(width|height)$/.test(c)){j[c]=d;this.updateClipping&&this.updateClipping();ha=true}else if(/^(x|y)$/.test(c)){if(c=="y"&&f.tagName=="SPAN"&&f.lineHeight)d-=f.lineHeight;
j[{x:"left",y:"top"}[c]]=d}else if(c=="class")f.className=d;else if(c=="stroke"){d=x.color(d,f,c);c="strokecolor"}else if(c=="stroke-width"||c=="strokeWidth"){f.stroked=d?true:false;c="strokeweight";if(typeof d=="number")d+=va}else if(c=="fill")if(r=="SPAN")j.color=d;else{f.filled=d!=ra?true:false;d=x.color(d,f,c);c="fillcolor"}else if(c=="translateX"||c=="translateY"){this[c]=b;this.updateTransform();ha=true}if(Y&&c=="visibility")for(e=Y.length;e--;)Y[e].style[c]=d;if(c=="text")f.innerHTML=d;else if(!ha)if(Z==
8)f[c]=d;else D(f,c,d)}return Ta},clip:function(a){var b=a.members,c=b.length;b.push(this);this.destroyClip=function(){b.splice(c,1)};return this.css(a.getCSS(this.inverted))},css:function(a){p(this.element,a);return this},destroy:function(){this.destroyClip&&this.destroyClip();z.prototype.destroy.apply(this)},empty:function(){var a=this.element;a=a.childNodes;for(var b=a.length,c;b--;){c=a[b];c.parentNode.removeChild(c)}},getBBox:function(){var a=this.element,b,c=a.offsetWidth,d=a.parentNode;c||
O.body.appendChild(a);b={x:a.offsetLeft,y:a.offsetTop,width:a.offsetWidth,height:a.offsetHeight};c||(d?d.appendChild(a):O.body.removeChild(a));return b},on:function(a,b){this.element["on"+a]=function(){var c=V.event;c.target=c.srcElement;b(c)};return this},updateTransform:function(){var a=this.translateX||0,b=this.translateY||0;if(a||b)this.css({left:a,top:b})},shadow:function(a){var b=[],c=this.element,d=this.renderer,e,f=c.style,j,r=c.path;if(""+c.path=="")r="x";if(a){for(a=1;a<=3;a++){j=['<shape isShadow="true" strokeweight="',
7-2*a,'" filled="false" path="',r,'" coordsize="100,100" style="',c.style.cssText,'" />'];e=i(d.prepVML(j),null,{left:parseInt(f.left,10)+1,top:parseInt(f.top,10)+1});j=['<stroke color="black" opacity="',0.05*a,'"/>'];i(d.prepVML(j),null,null,e);c.parentNode.insertBefore(e,c);b.push(e)}this.shadows=b}return this}});Yc=function(){this.init.apply(this,arguments)};Yc.prototype=Ma(qc.prototype,{isIE8:S.indexOf("MSIE 8.0")>-1,init:function(a,b,c){this.width=b;this.height=c;this.box=i(u,null,{width:b+va,
height:c+va},a);this.Element=vd;if(!O.namespaces.hcv){O.namespaces.add("hcv","urn:schemas-microsoft-com:vml");O.createStyleSheet().cssText="hcv\\:fill, hcv\\:path, hcv\\:textpath, hcv\\:shape, hcv\\:stroke, hcv\\:line { behavior:url(#default#VML); display: inline-block; } "}},clipRect:function(a,b,c,d){var e=this.createElement();return o(e,{members:[],element:{style:{left:a,top:b,width:c,height:d}},getCSS:function(f){var j=e.element.style,r=j.top,x=j.left,E=x+j.width;j=r+j.height;r={clip:"rect("+
(f?x:r)+"px,"+(f?j:E)+"px,"+(f?E:j)+"px,"+(f?r:x)+"px)"};!f&&O.documentMode==8&&o(r,{width:E+va,height:j+va});return r},updateClipping:function(){J(e.members,function(f){f.css(e.getCSS(f.inverted))})}})},color:function(a,b,c){var d,e=/^rgba/;if(a&&a.linearGradient){var f,j,r=a.linearGradient,x,E,I,Y;J(a.stops,function(Z,ha){if(e.test(Z[1])){d=ec(Z[1]);f=d.get("rgb");j=d.get("a")}else{f=Z[1];j=1}if(ha){I=f;Y=j}else{x=f;E=j}});a=90-za.atan((r[3]-r[1])/(r[2]-r[0]))*180/za.PI;c=["<",c,' colors="0% ',
x,",100% ",I,'" angle="',a,'" opacity="',Y,'" o:opacity2="',E,'" type="gradient" focus="100%" />'];i(this.prepVML(c),null,null,b)}else if(e.test(a)){d=ec(a);c=["<",c,' opacity="',d.get("a"),'"/>'];i(this.prepVML(c),null,null,b);return d.get("rgb")}else return a},prepVML:function(a){var b=this.isIE8;try{a=a.join("")}catch(c){for(var d="",e=0;e<a.length;e++)d+=a[e];a=d}if(b){a=a.replace("/>",' xmlns="urn:schemas-microsoft-com:vml" />');a=a.indexOf('style="')==-1?a.replace("/>",' style="display:inline-block;behavior:url(#default#VML);" />'):
a.replace('style="','style="display:inline-block;behavior:url(#default#VML);')}else a=a.replace("<","<hcv:");return a},text:function(a,b,c,d,e,f){d=d||{};f=f||"left";e=e||0;var j=ea(parseInt(d.fontSize||12,10)*1.2),r=Ra.chart.style;b=ea(b);c=ea(c);o(d,{color:d.color||"#000000",whiteSpace:"nowrap",fontFamily:d.fontFamily||r.fontFamily,fontSize:d.fontSize||r.fontSize});if(e){r=(e||0)*za.PI*2/360;e=Nb(r);r=Jb(r);j*=0.3;var x=f=="left",E=f=="right",I=x?b:b-10*e;b=E?b:b+10*e;x=x?c:c-10*r;c=E?c:c+10*r;
I+=j*r;b+=j*r;x-=j*e;c-=j*e;if(ia(I-b)<0.1)I+=0.1;if(ia(x-c)<0.1)x+=0.1;c=this.createElement("line").attr({from:I+", "+x,to:b+", "+c});e=c.element;i("hcv:fill",{on:true,color:d.color},null,e);i("hcv:path",{textpathok:true},null,e);i('<hcv:textpath style="v-text-align:'+f+";"+k(d).replace(/"/g,"'")+'" on="true" string="'+a.toString().replace(/<br[^>]?>/g,"\n")+'">',null,null,e)}else{c=this.createElement("span").attr({x:b,y:c-j,text:a});e=c.element;e.lineHeight=j;p(e,d);if(f!="left"){a=c.getBBox().width;
p(e,{left:b-a/{right:1,center:2}[f]+va})}}return c},path:function(a){return this.createElement("shape").attr({coordsize:"100 100",d:a})},circle:function(a,b,c){return this.path(this.symbols.circle(a,b,c))},g:function(a){var b;if(a)b={className:oa+a,"class":oa+a};return this.createElement(u).attr(b)},image:function(a,b,c,d,e){return this.createElement("img").attr({src:a}).css({left:b,top:c,width:d,height:e})},rect:function(a,b,c,d,e,f){if(arguments.length>1){var j=(f||0)%2/2;a=ea(a||0)+j;b=ea(b||0)+
j;c=ea((c||0)-2*j);d=ea((d||0)-2*j)}if(typeof a=="object"){b=a.y;c=a.width;d=a.height;e=a.r;a=a.x}return this.symbol("rect",a||0,b||0,e||0,{width:c||0,height:d||0})},symbol:function(a,b,c){var d;d=/^url\((.*?)\)$/;return d=d.test(a)?this.createElement("img").attr({onload:function(){var e=[this.width,this.height];p(this,{left:ea(b-e[0]/2),top:ea(c-e[1]/2)})},src:a.match(d)[1]}):qc.prototype.symbol.apply(this,arguments)},symbols:{arc:function(a,b,c,d){var e=d.start,f=d.end,j=f-e==2*Math.PI?f-0.0010:
f,r=Nb(e),x=Jb(e),E=Nb(j);j=Jb(j);d=d.innerR;if(f-e===0)return["x"];return["wa",a-c,b-c,a+c,b+c,a+c*r,b+c*x,a+c*E,b+c*j,"at",a-d,b-d,a+d,b+d,a+d*E,b+d*j,a+d*r,b+d*x,"x","e"]},circle:function(a,b,c){return["wa",a-c,b-c,a+c,b+c,a+c,b,a+c,b,"e"]},rect:function(a,b,c,d){var e=d.width;d=d.height;var f=a+e,j=b+d;c=Rb(c,e,d);return[cb,a+c,b,db,f-c,b,"wa",f-2*c,b,f,b+2*c,f-c,b,f,b+c,db,f,j-c,"wa",f-2*c,j-2*c,f,j,f,j-c,f-c,j,db,a+c,j,"wa",a,j-2*c,a+2*c,j,a+c,j,a,j-c,db,a,b+c,"wa",a,b,a+2*c,b+2*c,a,b+c,a+c,
b,"x","e"]}}})}var kd=Hb?qc:Yc,rc=function(){};rc.prototype={init:function(a,b){this.series=a;this.applyOptions(b);this.pointAttr={};if(a.options.colorByPoint){a=a.chart.options.colors;if(!this.options)this.options={};this.color=this.options.color=this.color||a[yb++];if(yb>=a.length)yb=0}return this},applyOptions:function(a){var b=this.series;this.config=a;if(typeof a=="number"||a===null)this.y=a;else if(typeof a=="object"&&typeof a.length!="number"){o(this,a);this.options=a}else if(typeof a[0]==
"string"){this.name=a[0];this.y=a[1]}else if(typeof a[0]=="number"){this.x=a[0];this.y=a[1]}if(this.x===m)this.x=b.autoIncrement()},destroy:function(){var a=this,b;a==a.series.chart.hoverPoint&&a.onMouseOut();dc(a);J(["dataLabel","graphic","tracker","group"],function(c){a[c]&&a[c].destroy()});a.legendItem&&a.series.chart.legend.destroyItem(a);for(b in a)a[b]=null},select:function(a,b){var c=this,d=c.series;d=d.chart;c.selected=a=h(a,!c.selected);c.firePointEvent(a?"select":"unselect");c.setState(a&&
"select");b||J(d.getSelectedPoints(),function(e){if(e.selected&&e!=c){e.selected=false;e.setState(jb);e.firePointEvent("unselect")}})},onMouseOver:function(){var a=this.series.chart,b=a.tooltip,c=a.hoverPoint;c&&c!=this&&c.onMouseOut();this.firePointEvent("mouseOver");b&&b.refresh(this);this.setState(Lb);a.hoverPoint=this},onMouseOut:function(){this.firePointEvent("mouseOut");this.setState(jb);this.series.chart.hoverPoint=null},update:function(a,b){var c=this,d=c.series;b=h(b,true);c.firePointEvent("update",
{options:a},function(){c.applyOptions(a);d.isDirty=true;b&&d.chart.redraw()})},remove:function(a){var b=this,c=b.series,d=c.chart,e=c.data,f=e.length;a=h(a,true);b.firePointEvent("remove",null,function(){for(;f--;)if(e[f]==b){e.splice(f,1);break}b.destroy();c.isDirty=true;a&&d.redraw()})},firePointEvent:function(a,b,c){var d=this,e=this.series;e=e.options;if(e.point.events[a]||d.options&&d.options.events&&d.options.events[a])this.importEvents();if(a=="click"&&e.allowPointSelect)c=function(f){d.select(null,
f.ctrlKey||f.metaKey||f.shiftKey)};$a(this,a,b,c)},importEvents:function(){if(!this.hasImportedEvents){var a=Ma(this.series.options.point,this.options);a=a.events;var b;this.events=a;for(b in a)Fb(this,b,a[b]);this.hasImportedEvents=true}},setState:function(a){var b=this.series,c=b.options.states,d=b.options.marker,e=d&&!d.enabled,f=(d=d&&d.states[a])&&d.enabled===false,j=b.chart,r=this.pointAttr;a||(a=jb);if(!(this.selected&&a!="select"||c[a]&&c[a].enabled===false||a&&(f||e&&!d.enabled)))if(a&&!this.graphic){if(!b.stateMarkerGraphic)b.stateMarkerGraphic=
j.renderer.circle(0,0,r[a].r).attr(r[a]).add(b.group);b.stateMarkerGraphic.translate(this.plotX,this.plotY)}else this.graphic&&this.graphic.attr(r[a])},setTooltipText:function(){this.tooltipText=this.series.chart.options.tooltip.formatter.call({series:this.series,point:this,x:this.category,y:this.y,percentage:this.percentage,total:this.total||this.stackTotal})}};var rb=function(){};rb.prototype={isCartesian:true,type:"line",pointClass:rc,pointAttrToOptions:{stroke:"lineColor","stroke-width":"lineWidth",
fill:"fillColor",r:"radius"},init:function(a,b){var c,d=a.series.length;this.chart=a;b=this.setOptions(b);o(this,{index:d,options:b,name:b.name||"Series "+(d+1),state:jb,pointAttr:{},visible:b.visible!==false,selected:b.selected===true});a=b.events;for(c in a)Fb(this,c,a[c]);this.getColor();this.getSymbol();this.setData(b.data,false)},autoIncrement:function(){var a=this.options,b=this.xIncrement;b=h(b,a.pointStart,0);this.pointInterval=h(this.pointInterval,a.pointInterval,1);this.xIncrement=b+this.pointInterval;
return b},cleanData:function(){var a=this;a=a.data;var b;a.sort(function(c,d){return c.x-d.x});for(b=a.length-1;b>=0;b--)a[b-1]&&a[b-1].x==a[b].x&&a.splice(b-1,1)},getSegments:function(){var a=-1,b=[],c=this.data;J(c,function(d,e){if(d.y===null){e>a+1&&b.push(c.slice(a+1,e));a=e}else e==c.length-1&&b.push(c.slice(a+1,e+1))});this.segments=b},setOptions:function(a){var b=this.chart.options.plotOptions;return Ma(b[this.type],b.series,a)},getColor:function(){var a=this.chart.options.colors;this.color=
this.options.color||a[yb++]||"#0000ff";if(yb>=a.length)yb=0},getSymbol:function(){var a=this.chart.options.symbols;this.symbol=this.options.marker.symbol||a[Wb++];if(Wb>=a.length)Wb=0},addPoint:function(a,b,c){var d=this.data;a=(new this.pointClass).init(this,a);b=h(b,true);d.push(a);c&&d[0].remove(false);this.isDirty=true;b&&this.chart.redraw()},setData:function(a,b){var c=this,d=c.data,e=c.initialColor,f=d&&d.length||0;c.xIncrement=null;if(v(e))yb=e;for(a=cc(n(a||[]),function(j){return(new c.pointClass).init(c,
j)});f--;)d[f].destroy();c.data=a;c.cleanData();c.getSegments();c.isDirty=true;h(b,true)&&c.chart.redraw()},remove:function(a){var b=this,c=b.chart;a=h(a,true);if(!b.isRemoving){b.isRemoving=true;$a(b,"remove",null,function(){b.destroy();c.isDirty=true;a&&c.redraw()})}b.isRemoving=false},translate:function(){for(var a=this.chart,b=this.options.stacking,c=this.xAxis.categories,d=this.yAxis,e=d.stacks[this.type],f=this.data,j=f.length;j--;){var r=f[j],x=r.x,E=r.y,I;r.plotX=this.xAxis.translate(x);if(b&&
this.visible&&e[x]){I=e[x];x=I.total;I.cum=I=I.cum-E;E=I+E;if(b=="percent"){I=x?I*100/x:0;E=x?E*100/x:0}r.percentage=x?r.y*100/x:0;r.stackTotal=x;r.yBottom=d.translate(I,0,1)}if(E!==null)r.plotY=d.translate(E,0,1);r.clientX=a.inverted?a.plotHeight-r.plotX:r.plotX;r.category=c&&c[r.x]!==m?c[r.x]:r.x}},setTooltipPoints:function(a){var b=this,c=b.chart,d=c.inverted,e=[],f=(d?c.plotTop:c.plotLeft)+c.plotSizeX,j,r,x=[];if(a)b.tooltipPoints=null;J(b.segments,function(E){e=e.concat(E)});if(b.xAxis&&b.xAxis.reversed)e=
e.reverse();J(e,function(E,I){b.tooltipPoints||E.setTooltipText();j=e[I-1]?e[I-1].high+1:0;for(r=E.high=e[I+1]?Oa((E.plotX+(e[I+1]?e[I+1].plotX:f))/2):f;j<=r;)x[d?f-j++:j++]=E});b.tooltipPoints=x},onMouseOver:function(){var a=this.chart,b=a.hoverSeries,c=this.stateMarkerGraphic;if(!a.mouseIsDown){c&&c.show();b&&b!=this&&b.onMouseOut();this.options.events.mouseOver&&$a(this,"mouseOver");this.tracker&&this.tracker.toFront();this.setState(Lb);a.hoverSeries=this}},onMouseOut:function(){var a=this.options,
b=this.chart,c=b.tooltip,d=b.hoverPoint;d&&d.onMouseOut();this&&a.events.mouseOut&&$a(this,"mouseOut");c&&!a.stickyTracking&&c.hide();this.setState();b.hoverSeries=null},animate:function(a){var b=this.chart,c=this.clipRect;if(a){if(!c.isAnimating){c.attr("width",0);c.isAnimating=true}}else{c.animate({width:b.plotSizeX},{complete:function(){c.isAnimating=false},duration:1E3});this.animate=null}},drawPoints:function(){var a,b=this.data,c=this.chart,d,e,f,j,r,x;if(this.options.marker.enabled)for(f=b.length;f--;){j=
b[f];d=j.plotX;e=j.plotY;x=j.graphic;if(e!==m){a=j.pointAttr[j.selected?"select":jb];r=a.r;if(x)x.attr({x:d,y:e,r:r});else j.graphic=c.renderer.symbol(h(j.marker&&j.marker.symbol,this.symbol),d,e,r).attr(a).add(this.group)}}},convertAttribs:function(a,b,c,d){var e=this.pointAttrToOptions,f,j,r={};a=a||{};b=b||{};c=c||{};d=d||{};for(f in e){j=e[f];r[f]=h(a[j],b[f],c[f],d[f])}return r},getAttribs:function(){var a=this,b=a.options.marker||a.options,c=b.states,d=c[Lb],e,f={},j=a.color,r=a.data,x=[],E,
I=a.pointAttrToOptions;if(a.options.marker){f={stroke:j,fill:j};d.radius=d.radius||b.radius+2;d.lineWidth=d.lineWidth||b.lineWidth+1}else{f={fill:j};d.color=d.color||ec(d.color||j).brighten(d.brightness).get()}x[jb]=a.convertAttribs(b,f);J([Lb,"select"],function(Z){x[Z]=a.convertAttribs(c[Z],x[jb])});a.pointAttr=x;for(f=r.length;f--;){j=r[f];if((b=j.options&&j.options.marker||j.options)&&b.enabled===false)b.radius=0;e=false;if(j.options)for(var Y in I)if(v(b[I[Y]]))e=true;if(e){E=[];c=b.states||{};
e=c[Lb]=c[Lb]||{};if(!a.options.marker)e.color=ec(e.color||j.options.color).brighten(e.brightness||d.brightness).get();E[jb]=a.convertAttribs(b,x[jb]);E[Lb]=a.convertAttribs(c[Lb],x[Lb],E[jb]);E.select=a.convertAttribs(c.select,x.select,E[jb])}else E=x;j.pointAttr=E}},destroy:function(){var a=this,b=a.chart,c=b.series,d=a.clipRect,e;dc(a);a.legendItem&&a.chart.legend.destroyItem(a);J(a.data,function(f){f.destroy()});J(["area","graph","dataLabelsGroup","group","tracker"],function(f){a[f]&&a[f].destroy()});
d&&d!=a.chart.clipRect&&d.destroy();if(b.hoverSeries==a)b.hoverSeries=null;J(c,function(f,j){f==a&&c.splice(j,1)});for(e in a)delete a[e]},drawDataLabels:function(){if(this.options.dataLabels.enabled){var a=this,b,c,d=a.data,e=a.options.dataLabels,f,j=a.dataLabelsGroup,r=a.chart,x=r.inverted,E=a.type,I,Y;if(!j)j=a.dataLabelsGroup=r.renderer.g(oa+"data-labels").attr({visibility:a.visible?"visible":ga,zIndex:4}).translate(r.plotLeft,r.plotTop).add();I=e.color;if(I=="auto")I=null;e.style.color=h(I,a.color);
J(d,function(Z){var ha=h(Z.barX,Z.plotX),Ta=Z.plotY,W=Z.tooltipPos,hb=Z.dataLabel;if(hb)Z.dataLabel=hb.destroy();f=e.formatter.call({x:Z.x,y:Z.y,series:a,point:Z,percentage:Z.percentage,total:Z.total||Z.stackTotal});b=(x?r.plotWidth-Ta:ha)+e.x;c=(x?r.plotHeight-ha:Ta)+e.y;if(W){b=W[0]+e.x;c=W[1]+e.y}Y=e.align;if(E=="column")b+={center:Z.barW/2,right:Z.barW}[Y]||0;if(f)Z.dataLabel=r.renderer.text(f,b,c,e.style,e.rotation,Y).attr({zIndex:1,visibility:Z.visible===false?ga:"inherit"}).add(j);a.drawConnector&&
a.drawConnector(Z)})}},drawGraph:function(){var a=this,b=a.options,c=a.chart,d=a.graph,e=[],f=a.area,j=a.group,r=b.lineColor||a.color,x=b.lineWidth,E,I=c.renderer,Y=a.yAxis.getThreshold(b.threshold||0),Z=/^area/.test(a.type),ha=[],Ta=[];J(a.segments,function(W){if(W.length>1){E=[];J(W,function(Cb,wb){wb<2&&E.push([cb,db][wb]);if(wb&&b.step){wb=W[wb-1];E.push(Cb.plotX,wb.plotY)}E.push(Cb.plotX,Cb.plotY)});e=e.concat(E);if(Z){var hb=[],qb,Qb=E.length;for(qb=0;qb<Qb;qb++)hb.push(E[qb]);if(b.stacking&&
a.type!="areaspline")for(qb=W.length-1;qb>=0;qb--)hb.push(W[qb].plotX,W[qb].yBottom);else hb.push(W[W.length-1].plotX,Y,W[0].plotX,Y,"z");Ta=Ta.concat(hb)}}else ha.push(W[0])});a.graphPath=e;a.singlePoints=ha;if(Z){c=h(b.fillColor,ec(a.color).setOpacity(b.fillOpacity||0.75).get());if(f)f.attr({d:Ta});else a.area=a.chart.renderer.path(Ta).attr({fill:c}).add(a.group)}if(d)d.attr({d:e});else if(x)a.graph=I.path(e).attr({stroke:r,"stroke-width":x+va}).add(j).shadow(b.shadow)},render:function(){var a=
this.chart,b,c=this.options.animation&&this.animate;b=a.renderer;if(!this.clipRect){this.clipRect=!a.hasRendered&&a.clipRect?a.clipRect:b.clipRect(0,0,a.plotSizeX,a.plotSizeY);if(!a.clipRect)a.clipRect=this.clipRect}if(!this.group){b=this.group=b.g("series");a.inverted&&b.attr({width:a.plotWidth,height:a.plotHeight}).invert();b.clip(this.clipRect).attr({visibility:this.visible?"visible":ga,zIndex:3}).translate(a.plotLeft,a.plotTop).add()}this.drawDataLabels();c&&this.animate(true);this.getAttribs();
this.drawGraph&&this.drawGraph();this.drawPoints();this.options.enableMouseTracking!==false&&this.drawTracker();c&&this.animate();this.isDirty=false},redraw:function(){this.translate();this.setTooltipPoints(true);this.render()},setState:function(a){var b=this.options,c=this.graph,d=b.states,e=this.stateMarkerGraphic;b=b.lineWidth;a=a||jb;if(this.state!=a){this.state=a;if(!(d[a]&&d[a].enabled===false)){if(a)b=d[a].lineWidth||b;else e&&e.hide();if(c)c.animate({"stroke-width":b},a?0:500)}}},setVisible:function(a,
b){var c=this.chart,d=this.legendItem,e=this.group,f=this.tracker,j=this.dataLabelsGroup,r,x=this.data,E=c.options.chart.ignoreHiddenSeries;r=this.visible;r=(this.visible=a=a===m?!r:a)?"show":"hide";if(a)this.isDirty=E;e&&e[r]();if(f)f[r]();else for(e=x.length;e--;){f=x[e];f.tracker&&f.tracker[r]()}j&&j[r]();d&&c.legend.colorizeItem(this,a);E&&this.options.stacking&&J(c.series,function(I){if(I.options.stacking&&I.visible)I.isDirty=true});b!==false&&c.redraw();$a(this,r)},show:function(){this.setVisible(true)},
hide:function(){this.setVisible(false)},select:function(a){this.selected=a=a===m?!this.selected:a;if(this.checkbox)this.checkbox.checked=a;$a(this,a?"select":"unselect")},drawTracker:function(){var a=this,b=a.options,c=a.graphPath,d=a.chart,e=d.options.tooltip.snap,f=a.tracker,j=b.cursor;j=j&&{cursor:j};var r=a.singlePoints,x,E;for(E=0;E<r.length;E++){x=r[E];c.push(cb,x.plotX-3,x.plotY,db,x.plotX+3,x.plotY)}if(f)f.attr({d:c});else a.tracker=d.renderer.path(c).attr({isTracker:true,stroke:gc,fill:ra,
"stroke-width":b.lineWidth+2*e,"stroke-linecap":"round",visibility:a.visible?"visible":ga,zIndex:1}).on("mouseover",function(){d.hoverSeries!=a&&a.onMouseOver()}).on("mouseout",function(){b.stickyTracking||a.onMouseOut()}).css(j).add(d.trackerGroup)}};S=q(rb);Bb.line=S;S=q(rb,{type:"area"});Bb.area=S;aa.prototype={get:function(a){a||(a=50);var b=this.n;b=(this.xdata[b-1]-this.xdata[0])/(a-1);var c=[],d=[];c[0]=this.xdata[0];d[0]=this.ydata[0];for(var e=[{plotX:c[0],plotY:d[0]}],f=1;f<a;f++){c[f]=
c[0]+f*b;d[f]=this.interpolate(c[f]);e[f]={plotX:c[f],plotY:d[f]}}return e},interpolate:function(a){for(var b=this.n-1,c=0;b-c>1;){var d=(b+c)/2;if(this.xdata[Oa(d)]>a)b=d;else c=d}b=Oa(b);c=Oa(c);d=this.xdata[b]-this.xdata[c];var e=(this.xdata[b]-a)/d;a=(a-this.xdata[c])/d;return e*this.ydata[c]+a*this.ydata[b]+((e*e*e-e)*this.y2[c]+(a*a*a-a)*this.y2[b])*d*d/6}};S=q(rb,{type:"spline",drawGraph:function(){var a=this.segments;this.segments=this.splinedata=this.getSplineData();rb.prototype.drawGraph.apply(this,
arguments);this.segments=a},getSplineData:function(){var a=this,b=[],c=a.chart.plotSizeX,d;J(a.segments,function(e){if(a.xAxis.reversed)e=e.reverse();var f=[],j,r;J(e,function(x,E){j=e[E+2]||e[E+1]||x;r=e[E-2]||e[E-1]||x;j.plotX>=0&&r.plotX<=c&&f.push(x)});if(f.length>1)d=ea(Ib(c,f[f.length-1].clientX-f[0].clientX)/3);b.push(e.length>1?d?(new aa(f)).get(d):[]:e)});return b}});Bb.spline=S;S=q(S,{type:"areaspline"});Bb.areaspline=S;var Cc=q(rb,{type:"column",pointAttrToOptions:{stroke:"borderColor",
"stroke-width":"borderWidth",fill:"color",r:"borderRadius"},init:function(){rb.prototype.init.apply(this,arguments);var a=this,b=a.chart;b.hasRendered&&J(b.series,function(c){if(c.type==a.type)c.isDirty=true})},translate:function(){var a=this,b=a.chart,c=0,d=a.xAxis.reversed,e=a.xAxis.categories,f;rb.prototype.translate.apply(a);J(b.series,function(W){if(W.type==a.type)if(W.options.stacking){v(f)||(f=c++);W.columnIndex=f}else W.columnIndex=c++});var j=a.options,r=a.data,x=a.closestPoints;b=ia(r[1]?
r[x].plotX-r[x-1].plotX:b.plotSizeX/(e?e.length:1));e=b*j.groupPadding;x=b-2*e;x/=c;var E=j.pointWidth,I=v(E)?(x-E)/2:x*j.pointPadding,Y=h(E,x-2*I);E=(d?c-a.columnIndex:a.columnIndex)||0;var Z=I+(e+E*x-b/2)*(d?-1:1),ha=a.yAxis.getThreshold(j.threshold||0),Ta=j.minPointLength;J(r,function(W){var hb=W.plotY,qb=W.plotX+Z,Qb=kc(Rb(hb,ha)),Cb=kc(ia((W.yBottom||ha)-hb)),wb;if(ia(Cb)<(Ta||5)){if(Ta){Cb=Ta;Qb=ha-(hb<=ha?Ta:0)}wb=Qb-3}o(W,{barX:qb,barY:Qb,barW:Y,barH:Cb});W.shapeType="rect";W.shapeArgs={x:qb,
y:Qb,width:Y,height:Cb,r:j.borderRadius};W.trackerArgs=v(wb)&&Ma(W.shapeArgs,{height:6,y:wb})})},getSymbol:function(){},drawGraph:function(){},drawPoints:function(){var a=this,b=a.options,c=a.chart.renderer,d,e;J(a.data,function(f){if(v(f.plotY)){d=f.graphic;e=f.shapeArgs;if(d)d.attr(e);else f.graphic=c[f.shapeType](e).attr(f.pointAttr[f.selected?"select":jb]).add(a.group).shadow(b.shadow)}})},drawTracker:function(){var a=this,b=a.chart,c=b.renderer,d,e,f=+new Date,j=a.options.cursor,r=j&&{cursor:j},
x;J(a.data,function(E){e=E.tracker;d=E.trackerArgs||E.shapeArgs;if(e)e.attr(d);else E.tracker=c[E.shapeType](d).attr({isTracker:f,fill:gc,visibility:a.visible?"visible":ga,zIndex:1}).on("mouseover",function(I){x=I.relatedTarget||I.fromElement;b.hoverSeries!=a&&D(x,"isTracker")!=f&&a.onMouseOver();E.onMouseOver()}).on("mouseout",function(I){if(!a.options.stickyTracking){x=I.relatedTarget||I.toElement;D(x,"isTracker")!=f&&a.onMouseOut()}}).css(r).add(b.trackerGroup)})},cleanData:function(){var a=this.data,
b,c,d,e;rb.prototype.cleanData.apply(this);for(e=a.length-1;e>=0;e--)if(a[e-1]){b=a[e].x-a[e-1].x;if(c===m||b<c){c=b;d=e}}this.closestPoints=d},animate:function(a){var b=this,c=b.data;if(!a){J(c,function(d){var e=d.graphic;if(e){e.attr({height:0,y:b.yAxis.translate(0,0,1)});e.animate({height:d.barH,y:d.barY},{duration:1E3})}});b.animate=null}},remove:function(){var a=this,b=a.chart;b.hasRendered&&J(b.series,function(c){if(c.type==a.type)c.isDirty=true});rb.prototype.remove.apply(a,arguments)}});Bb.column=
Cc;S=q(Cc,{type:"bar",init:function(a){a.inverted=this.inverted=true;Cc.prototype.init.apply(this,arguments)}});Bb.bar=S;S=q(rb,{type:"scatter",translate:function(){var a=this;rb.prototype.translate.apply(a);J(a.data,function(b){b.shapeType="circle";b.shapeArgs={x:b.plotX,y:b.plotY,r:a.chart.options.tooltip.snap}})},drawTracker:function(){var a=this,b=a.options.cursor,c=b&&{cursor:b},d;J(a.data,function(e){(d=e.graphic)&&d.attr({isTracker:true}).on("mouseover",function(){a.onMouseOver();e.onMouseOver()}).on("mouseout",
function(){a.options.stickyTracking||a.onMouseOut()}).css(c)})},cleanData:function(){}});Bb.scatter=S;S=q(rc,{init:function(){rc.prototype.init.apply(this,arguments);var a=this,b;o(a,{visible:a.visible!==false,name:h(a.name,"Slice")});b=function(){a.slice()};Fb(a,"select",b);Fb(a,"unselect",b);return a},setVisible:function(a){var b=this.series.chart,c;c=(this.visible=a=a===m?!this.visible:a)?"show":"hide";this.group[c]();this.tracker&&this.tracker[c]();this.dataLabel&&this.dataLabel[c]();this.legendItem&&
b.legend.colorizeItem(this,a)},slice:function(a,b){var c=this.series;c=c.chart;var d=this.slicedTranslation;h(b,true);a=this.sliced=v(a)?a:!this.sliced;this.group.animate({translateX:a?d[0]:c.plotLeft,translateY:a?d[1]:c.plotTop},100)}});S=q(rb,{type:"pie",isCartesian:false,pointClass:S,pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color"},getColor:function(){this.initialColor=yb},translate:function(){var a=0,b=this,c=-0.25,d=b.options,e=d.slicedOffset,f=d.center,j=b.chart,
r=j.plotWidth,x=j.plotHeight,E,I,Y;b=b.data;var Z=2*za.PI,ha,Ta=Rb(r,x);f.push(d.size,d.innerSize||0);f=cc(f,function(W,hb){return/%$/.test(W)?[r,x,Ta,Ta][hb]*parseInt(W,10)/100:W});J(b,function(W){a+=W.y});J(b,function(W){ha=a?W.y/a:0;E=c*Z;c+=ha;I=c*Z;W.shapeType="arc";W.shapeArgs={x:f[0],y:f[1],r:f[2]/2,innerR:f[3]/2,start:E,end:I};Y=(I+E)/2;W.slicedTranslation=cc([Nb(Y)*e+j.plotLeft,Jb(Y)*e+j.plotTop],ea);W.tooltipPos=[f[0]+Nb(Y)*f[2]*0.35,f[1]+Jb(Y)*f[2]*0.35];W.percentage=ha*100;W.total=a});
this.setTooltipPoints()},render:function(){this.getAttribs();this.drawPoints();this.options.enableMouseTracking!==false&&this.drawTracker();this.drawDataLabels();this.isDirty=false},drawPoints:function(){var a=this.chart,b=a.renderer,c,d,e;J(this.data,function(f){d=f.graphic;e=f.shapeArgs;if(!f.group){c=f.sliced?f.slicedTranslation:[a.plotLeft,a.plotTop];f.group=b.g("point").attr({zIndex:3}).add().translate(c[0],c[1])}if(d)d.attr(e);else f.graphic=b.arc(e).attr(f.pointAttr[jb]).add(f.group);f.visible===
false&&f.setVisible(false)})},drawTracker:Cc.prototype.drawTracker,getSymbol:function(){}});Bb.pie=S;V.Highcharts={Chart:H,dateFormat:Yb,getOptions:B,numberFormat:A,Point:rc,Renderer:kd,seriesTypes:Bb,setOptions:G,Series:rb,addEvent:Fb,createElement:i,discardElement:g,css:p,each:J,extend:o,map:cc,merge:Ma,pick:h,extendClass:q}})();define("lib/highcharts",function(){});