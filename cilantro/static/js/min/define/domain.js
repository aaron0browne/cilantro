var Domain,DomainCollection,DomainView,__bind=function(a,b){return function(){return a.apply(b,arguments)}},__hasProp=Object.prototype.hasOwnProperty,__extends=function(a,b){function c(){this.constructor=a}for(var d in b)__hasProp.call(b,d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype;return a};Domain=function(){function a(){this.subdomainBinding=__bind(this.subdomainBinding,this),this.domainBinding=__bind(this.domainBinding,this),this.conceptBinding=__bind(this.conceptBinding,this),a.__super__.constructor.apply(this,arguments)}__extends(a,Backbone.Model),a.prototype.initialize=function(){controller.bind("change:concept",this.conceptBinding),this.type=this.get("parent")?"subdomain":"domain",this.parent=null,this.state={subdomain:null,concept:null};return this.type==="domain"?controller.bind("change:domain",this.domainBinding):controller.bind("change:subdomain",this.subdomainBinding)},a.prototype.conceptBinding=function(a,b){if(this===controller.get(this.type)){this.state.concept=b;if(this.type==="subdomain")return this.parent.state.concept=b}},a.prototype.domainBinding=function(a,b){if(this===b)return controller.set({subdomain:this.state.subdomain,concept:this.state.concept})},a.prototype.subdomainBinding=function(a,b){if(this===b)return controller.set({concept:this.state.concept,domain:this.parent})};return a}(),DomainCollection=function(){function a(){a.__super__.constructor.apply(this,arguments)}__extends(a,Backbone.Collection),a.prototype.model=Domain,a.prototype.url="/apps/audgendb/api/categories/",a.prototype.initialize=function(){this.bind("refresh",this.refreshBinding);return controller.bind("change:_domain",this._domainBinding)},a.prototype.refreshBinding=function(){return this.each(function(a){if(a.type==="subdomain")return a.parent=this.get(a.get("parent"))})};return a}(),DomainView=function(){function a(){this.toggleActiveStyle=__bind(this.toggleActiveStyle,this),a.__super__.constructor.apply(this,arguments)}__extends(a,Backbone.View),a.prototype.tagName="span",a.prototype.template=_.template('<div class="icon"></div><span><%= name %></span>'),a.prototype.events={click:"setAppStateDomain"},a.prototype.initialize=function(){controller.bind("change:domain",this.toggleActiveStyle);return this.render()},a.prototype.render=function(){var a;a=this.model.get("name"),this.jq=$(this.el).attr({id:"tab-"+a.toLowerCase()}).html(this.template({name:a}));return this.jq},a.prototype.setAppStateDomain=function(a){controller.set({domain:this.model});return!1},a.prototype.toggleActiveStyle=function(a,b){return this.model===b?this.jq.addClass("active"):this.jq.removeClass("active")};return a}()