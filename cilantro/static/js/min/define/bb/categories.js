define("define/categories",["define/events","lib/backbone"],function(a){var b=['<span id="tab-<%= name.toLowerCase() %>" ','class="tab" data-id="<%= id %>">','<div class="icon"></div>',"<span><%= name %></span>","</span>"].join(""),c;$(function(){var a=Backbone.Model.extend({defaults:{active:!1}}),c=Backbone.Collection.extend({model:a,url:window.__api__.categories,changeActiveState:function(a){_.each(this.models,function(a){a.set({active:!1})}),a.set({active:!0})}}),d=Backbone.View.extend({template:_.template(b),events:{click:"changeActiveState"},initialize:function(){_.bindAll(this,"render","toggleViewActiveState"),this.model.bind("add",this.render),this.model.bind("change:active",this.toggleViewActiveState),this.model.view=this},render:function(){this.el=$(this.template(this.model.toJSON())),this.delegateEvents();return this},toggleViewActiveState:function(){this.model.get("active")===!0?this.el.addClass("active"):this.el.removeClass("active")},changeActiveState:function(){this.model.get("active")!==!0&&this.model.collection.changeActiveState(this.model)}}),e=Backbone.View.extend({el:$("#categories"),collection:new c,initialize:function(){_.bindAll(this,"addOne","addAll"),this.collection.bind("add",this.addOne),this.collection.bind("refresh",this.addAll),this.collection.fetch()},addOne:function(a){var b=new d({model:a});this.el.append(b.render().el)},addAll:function(){this.collection.each(this.addOne),this.collection.at(0).set({active:!0})}});e=new e});return c})