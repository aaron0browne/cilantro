define("define/models/criterion",["define/models/base"],function(a){var b=a.ActiveStateModel.extend({path:"criterion.model",defaults:{visible:!0},initialize:function(){this.bind("change:active",this.setCategoryActiveState),a.ActiveStateModel.prototype.initialize.call(this)},setCategoryActiveState:function(){if(!!this.get("active")){var a=this.get("category");a.set({criterion:this}),clerk.send("category.collection","updateActiveState",[a.id])}}}),c=a.SingleActiveStateCollection.extend({url:window.api.criterion,path:"criterion.collection",model:b,initialize:function(){this.bind("refresh",function(){clerk.send("category.collection",function(a){var b=this;a.each(function(a){a.set({category:b.get(a.get("category").id)})})},[this])}),a.SingleActiveStateCollection.prototype.initialize.call(this)},filterByCategory:function(a){var b;this.each(function(c){b=c.get("category"),c.set({visible:b.id===a})})}});return{CriterionCollection:c}})