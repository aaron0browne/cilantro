var __hasProp=Object.prototype.hasOwnProperty,__extends=function(a,b){function d(){this.constructor=a}for(var c in b)__hasProp.call(b,c)&&(a[c]=b[c]);d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype;return a},__bind=function(a,b){return function(){return a.apply(b,arguments)}};define(["common/models/polling"],function(a){var b,c,d;b=function(){function b(){b.__super__.constructor.apply(this,arguments)}__extends(b,a.Model),b.prototype.url=App.urls.session.report,b.prototype.defaults={name:"click to add a name...",description:"click to add a description..."},b.prototype.toJSON=function(){var a,c,d;a=b.__super__.toJSON.apply(this,arguments),a.perspective=((c=a.perspective)!=null?c.id:void 0)||null,a.scope=((d=a.scope)!=null?d.id:void 0)||null;return a},b.prototype.initialize=function(){return this.bind("change",function(){this.unbind("change");return this.bind("change",this.save)})};return b}(),d=function(){function a(){this.enter=__bind(this.enter,this),this.show=__bind(this.show,this),this.edit=__bind(this.edit,this),this.render=__bind(this.render,this),a.__super__.constructor.apply(this,arguments)}__extends(a,Backbone.View),a.prototype.el="#report-name",a.prototype.events={"click span":"edit","blur [name=name]":"show","keypress [name=name]":"enter"},a.prototype.elements={span:"name","[name=name]":"nameInput"},a.prototype.initialize=function(){return this.model.bind("change",this.render)},a.prototype.render=function(){var a;(a=this.model.get("name"))?this.name.removeClass("placeholder"):(this.name.addClass("placeholder"),a=this.model.defaults.name);return this.name.text(a)},a.prototype.edit=function(){this.model.stopPolling(),this.name.hide();return this.nameInput.show().select()},a.prototype.show=function(a){var b;(b=this.nameInput.val())&&!/^\s*$/.test(b)&&(this.model.set({name:b}),this.render()),this.name.show(),this.nameInput.hide();return this.model.startPolling()},a.prototype.enter=function(a){if(a.which===13)return this.show()};return a}(),c=function(){function a(){this.showDescription=__bind(this.showDescription,this),this.editDescription=__bind(this.editDescription,this),a.__super__.constructor.apply(this,arguments)}__extends(a,Backbone.View),a.prototype.el="#report-info",a.prototype.events={"click p":"editDescription","blur [name=description]":"showDescription"},a.prototype.elements={p:"description","[name=description]":"descriptionInput"},a.prototype.initialize=function(){if(this.model.id&&this.model.get("has_changed"))return this.el.addClass("unsaved")},a.prototype.editDescription=function(){this.description.hide();return this.descriptionInput.show().select()},a.prototype.showDescription=function(){this.model.get("description")?this.description.removeClass("placeholder"):(this.model.set({description:this.model.defaults.description}),this.description.addClass("placeholder")),this.description.show();return this.descriptionInput.hide()};return a}();return{Model:b,NameView:d,InfoView:c}})